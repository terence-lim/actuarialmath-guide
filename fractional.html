

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Fractional Ages &#8212; Solving Actuarial Math with Python</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'fractional';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Insurance" href="insurance.html" />
    <link rel="prev" title="Expected Future Lifetimes" href="lifetime.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="README.html">
  
  
  
  
  
    <p class="title logo__title">Solving Actuarial Math with Python</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="README.html">
                    USER GUIDE
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="actuarial.html">Actuarial Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="interest.html">Interest Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="life.html">Life Contingent Risks</a></li>
<li class="toctree-l1"><a class="reference internal" href="survival.html">Survival Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="lifetime.html">Expected Future Lifetimes</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Fractional Ages</a></li>
<li class="toctree-l1"><a class="reference internal" href="insurance.html">Insurance</a></li>
<li class="toctree-l1"><a class="reference internal" href="annuity.html">Annuities</a></li>
<li class="toctree-l1"><a class="reference internal" href="premiums.html">Premiums</a></li>
<li class="toctree-l1"><a class="reference internal" href="policyvalues.html">Policy Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="reserves.html">Reserves</a></li>
<li class="toctree-l1"><a class="reference internal" href="recursion.html">Recursion</a></li>
<li class="toctree-l1"><a class="reference internal" href="lifetable.html">Life Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="sult.html">SULT</a></li>
<li class="toctree-l1"><a class="reference internal" href="selectlife.html">Select Life Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="mortalitylaws.html">Mortality Laws</a></li>
<li class="toctree-l1"><a class="reference internal" href="constantforce.html">Constant Force of Mortality</a></li>
<li class="toctree-l1"><a class="reference internal" href="extrarisk.html">Extra Risk</a></li>
<li class="toctree-l1"><a class="reference internal" href="mthly.html">1/M’thly</a></li>
<li class="toctree-l1"><a class="reference internal" href="udd.html">UDD M’thly</a></li>
<li class="toctree-l1"><a class="reference internal" href="woolhouse.html">Woolhouse M’thly</a></li>
<li class="toctree-l1"><a class="reference internal" href="faml.html">Sample Solutions and Hints</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/terence-lim/actuarialmath.git" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/terence-lim/actuarialmath.git/issues/new?title=Issue%20on%20page%20%2Ffractional.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/fractional.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Fractional Ages</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#uniform-distribution-of-deaths">Uniform distribution of deaths</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#constant-force-of-mortality">Constant force of mortality</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#methods">Methods</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#examples">Examples</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="fractional-ages">
<h1>Fractional Ages<a class="headerlink" href="#fractional-ages" title="Permalink to this heading">#</a></h1>
<p>Given values of <span class="math notranslate nohighlight">\(l_x\)</span> at integer ages only, we need to make some assumption about the probability distribution for the future lifetime random variable between integer ages, in order to calculate survival function values for non-integer ages or durations. Such fractional age assumptions may be specified in terms of the force of mortality function (e.g. constant) or the survival or mortality probabilities (e.g. uniform distribution of deaths).</p>
<section id="uniform-distribution-of-deaths">
<h2>Uniform distribution of deaths<a class="headerlink" href="#uniform-distribution-of-deaths" title="Permalink to this heading">#</a></h2>
<p>This is the simplest assumption, which linearly interpolates the number of lives between integer ages.</p>
<p><span class="math notranslate nohighlight">\(T_x = K_x + R_x\)</span></p>
<ul class="simple">
<li><p>The UDD assumptions define can be modeled by a new random variable <span class="math notranslate nohighlight">\(R_x \sim U(0,1)\)</span> which is independent of curtate lifetime <span class="math notranslate nohighlight">\(K_x\)</span>.</p></li>
</ul>
<p><span class="math notranslate nohighlight">\(_rq_x = r ~ q_x\)</span>, for integer <span class="math notranslate nohighlight">\(x\)</span> and <span class="math notranslate nohighlight">\(0 \le r &lt; 1\)</span></p>
<ul class="simple">
<li><p>is an equivalent way of formulating the UDD assumption</p></li>
</ul>
<p><span class="math notranslate nohighlight">\(l_{x+r} = (1 - r) ~ l_x + r ~ l_{x+1} = l_x - r~d_x\)</span></p>
<ul class="simple">
<li><p>linear interpolation of lives between integer ages</p></li>
</ul>
<p><span class="math notranslate nohighlight">\(_rq_{x+s} = \dfrac{r ~ q_x}{1 - s ~ q_x}, \quad\)</span> for <span class="math notranslate nohighlight">\(0 \le s + r &lt; 0\)</span></p>
<ul class="simple">
<li><p>mortality rate at a fractional age over a fractional duration, under UDD</p></li>
</ul>
<p><span class="math notranslate nohighlight">\(\mu_{x+r} = \dfrac{1}{1 - r ~ q_x}\)</span></p>
<ul class="simple">
<li><p>applying the UDD approximation over successive ages implies a discontinuous function for the force of mortality, with discontinuities occurring at integer ages.</p></li>
</ul>
<p><span class="math notranslate nohighlight">\(f_x(r) =~ _rp_x \mu_{x+r} =~ q_x\)</span></p>
<ul class="simple">
<li><p>lifetime density is constant between integer ages, which also follows from the UDD assumption for <span class="math notranslate nohighlight">\(R_x\)</span>.</p></li>
</ul>
<p><span class="math notranslate nohighlight">\(\overset{\circ}{e}_{x:\overline{1|}} = 1 - q_x \dfrac{1}{2} = q_x \dfrac{1}{2} + ~p_x\)</span></p>
<ul class="simple">
<li><p>1-year limited complete expectation</p></li>
</ul>
<p><span class="math notranslate nohighlight">\(\overset{\circ}{e}_{x:\overline{r|}} =~ _rq_x \dfrac{r}{2} +~ _rp_x r\)</span></p>
<ul class="simple">
<li><p>fractional year limited complete expectation</p></li>
</ul>
<p><span class="math notranslate nohighlight">\(\overset{\circ}{e}_{x} = q_x \dfrac{1}{2} + p_x(1 + \overset{\circ}{e}_{x+1}) = \overset{\circ}{e}_{x:\overline{1|}} + p_x \overset{\circ}{e}_{x+1}\)</span></p>
<ul class="simple">
<li><p>recursive for complete expectation of life: UDD-specific and general formulas</p></li>
</ul>
<p><span class="math notranslate nohighlight">\(\overset{\circ}{e}_{x} = e_x + 0.5\)</span></p>
<ul class="simple">
<li><p>since <span class="math notranslate nohighlight">\(E[R_x] = 0.5\)</span></p></li>
</ul>
<p><span class="math notranslate nohighlight">\(Var(T_x) = Var(K_x) + \dfrac{1}{12}\)</span></p>
<ul class="simple">
<li><p>since <span class="math notranslate nohighlight">\(Var[R_x] = \dfrac{1}{12}\)</span></p></li>
</ul>
<p><span class="math notranslate nohighlight">\(\overset{\circ}{e}_{x:\overline{n|}} = e_{x:\overline{n|}} + 0.5 ~_nq_x\)</span></p>
<ul class="simple">
<li><p>These exact results under UDD are often used generally as approximations between complete and curtate expectations.</p></li>
</ul>
</section>
<section id="constant-force-of-mortality">
<h2>Constant force of mortality<a class="headerlink" href="#constant-force-of-mortality" title="Permalink to this heading">#</a></h2>
<p>Under this assumption, the force of mortality is set to be constant between integer ages</p>
<p><span class="math notranslate nohighlight">\(\mu_{x+r} =~ \mu_{x} =~ -\ln ~p_x, \quad\)</span> for <span class="math notranslate nohighlight">\(0 \le r &lt; 1\)</span></p>
<ul class="simple">
<li><p>which leads to a step function for the force of mortality over successive years of age</p></li>
</ul>
<p><span class="math notranslate nohighlight">\(l_{x+r} = (l_x)^{1-r} \cdot (l_{x+1})^{r}\)</span></p>
<ul class="simple">
<li><p>constant force of mortality is equivalent to exponential interpolation of lives between integer ages</p></li>
</ul>
<p><span class="math notranslate nohighlight">\(_rp_x = e^{-\mu_x r} = (p_x)^r\)</span></p>
<ul class="simple">
<li><p>since <span class="math notranslate nohighlight">\(p_x = e^{-\int_0^1 \mu_{x+u} du} = e^{-\mu_x}\)</span></p></li>
</ul>
<p><span class="math notranslate nohighlight">\(_rp_{x+s} = e^{-\int_0^r \mu_{x+s+u} du} = (p_x)^r, \quad\)</span> for <span class="math notranslate nohighlight">\(0 \le r+s &lt; 1\)</span></p>
<ul class="simple">
<li><p>the probability of surviving for period of <span class="math notranslate nohighlight">\(r\)</span> from age <span class="math notranslate nohighlight">\(x+s\)</span> is independent of <span class="math notranslate nohighlight">\(s\)</span> under constant force of mortality</p></li>
</ul>
<p><span class="math notranslate nohighlight">\(f_x(r) =~ _rp_x ~ \mu_{x+r} = e^{-\mu_x r} \cdot \mu_x,\quad\)</span> for <span class="math notranslate nohighlight">\(0 \le r &lt;1\)</span></p>
<ul class="simple">
<li><p>lifetime density function at fractional age using constant force of mortality assumption</p></li>
</ul>
<p><span class="math notranslate nohighlight">\(\overset{\circ}{e}_{x:\overline{r|}} = \dfrac{1 - e^{-\mu_x r}}{\mu}\)</span></p>
<ul class="simple">
<li><p>fractional year limited complete expectation</p></li>
</ul>
</section>
<section id="methods">
<h2>Methods<a class="headerlink" href="#methods" title="Permalink to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">Fractional</span></code> class implements methods to compute survival and mortality functions between integer ages, assuming either uniform distribution of deaths or constant force of mortality</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">actuarialmath</span> <span class="kn">import</span> <span class="n">Fractional</span>
<span class="kn">import</span> <span class="nn">describe</span>
<span class="n">describe</span><span class="o">.</span><span class="n">methods</span><span class="p">(</span><span class="n">Fractional</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>class Fractional - Compute survival functions at fractional ages and durations

    Args:
      udd : select UDD (True, default) or CFM (False) between integer ages

    Methods:
    --------

    l_r(x, s, r):
      Number of lives at fractional age: l_[x]+s+r

    p_r(x, s, r, t):
      Probability of survival from and through fractional age: t_p_[x]+s+r

    q_r(x, s, r, t, u):
      Deferred mortality rate within fractional ages: u|t_q_[x]+s+r

    mu_r(x, s, r):
      Force of mortality at fractional age: mu_[x]+s+r

    f_r(x, s, r, t):
      Lifetime density function at fractional age: f_[x]+s+r (t)

    E_r(x, s, r, t):
      Pure endowment at fractional age: t_E_[x]+s+r

    e_r(x, s, t):
      Temporary expected future lifetime at fractional age: e_[x]+s:t

    e_approximate(e_complete, e_curtate, variance):
      Convert between curtate and complete expectations assuming UDD shortcut
</pre></div>
</div>
</div>
</div>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">Fractional</span></code> class can be initialized to apply the uniform distribution or constant force of mortality assumptions at fractional ages (by setting the <code class="docutils literal notranslate"><span class="pre">udd</span></code> argument to be either True or False respectively), while using any other survival model for integer ages. Then survival function values at fractional ages can be computed by the methods <code class="docutils literal notranslate"><span class="pre">l_r</span></code>, <code class="docutils literal notranslate"><span class="pre">p_r</span></code>, <code class="docutils literal notranslate"><span class="pre">q_r</span></code>, <code class="docutils literal notranslate"><span class="pre">mu_r</span></code>, <code class="docutils literal notranslate"><span class="pre">f_r</span></code> and <code class="docutils literal notranslate"><span class="pre">E_r</span></code> (for the number of lives, survival probability, mortality rate, force of mortality, lifetime density and pure endowment functions respectively).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cfm</span> <span class="o">=</span> <span class="n">Fractional</span><span class="p">(</span><span class="n">udd</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">set_survival</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">t</span><span class="p">:</span> <span class="mi">50</span><span class="o">-</span><span class="n">x</span><span class="o">-</span><span class="n">t</span><span class="p">)</span>
<span class="n">udd</span> <span class="o">=</span> <span class="n">Fractional</span><span class="p">(</span><span class="n">udd</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">set_survival</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">t</span><span class="p">:</span> <span class="mi">50</span><span class="o">-</span><span class="n">x</span><span class="o">-</span><span class="n">t</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Compare:   Constant Force of Mortality    vs    UDD  assumptions&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;           ---------------------------         -----&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;mortality rate    &#39;</span><span class="p">,</span> <span class="n">cfm</span><span class="o">.</span><span class="n">q_r</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mf">0.5</span><span class="p">),</span> <span class="n">udd</span><span class="o">.</span><span class="n">q_r</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mf">0.5</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;force of mortality&#39;</span><span class="p">,</span> <span class="n">cfm</span><span class="o">.</span><span class="n">mu_r</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mf">0.5</span><span class="p">),</span> <span class="n">udd</span><span class="o">.</span><span class="n">mu_r</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mf">0.5</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;lifetime density  &#39;</span><span class="p">,</span> <span class="n">cfm</span><span class="o">.</span><span class="n">f_r</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mf">0.5</span><span class="p">),</span> <span class="n">udd</span><span class="o">.</span><span class="n">f_r</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mf">0.5</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Compare:   Constant Force of Mortality    vs    UDD  assumptions
           ---------------------------         -----
mortality rate     0.05131670194948623 0.04999999999999999
force of mortality 0.10536051565782628 0.10526315789473682
lifetime density   1.0 0.09999999999999998
</pre></div>
</div>
</div>
</div>
<p>When using constant force of maturity as the fractional age assumption, the force of maturity may show discontinuous jumps at integer ages</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">cfm</span> <span class="o">=</span> <span class="n">Fractional</span><span class="p">(</span><span class="n">udd</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">set_survival</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">s</span><span class="p">:</span> <span class="mi">100</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">s</span><span class="p">))</span>
<span class="n">udd</span> <span class="o">=</span> <span class="n">Fractional</span><span class="p">(</span><span class="n">udd</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">set_survival</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">s</span><span class="p">:</span> <span class="mi">100</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">s</span><span class="p">))</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="p">[</span><span class="n">cfm</span><span class="o">.</span><span class="n">mu_r</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="n">r</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">x</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="p">[</span><span class="n">udd</span><span class="o">.</span><span class="n">mu_r</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="n">r</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">x</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39; Constant Force of Maturity&#39;</span><span class="p">,</span> <span class="s1">&#39;Uniform Distribution&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;force of mortality $\mu$&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Age&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Fractional Age Assumptions and Force of Mortality&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Fractional Age Assumptions and Force of Mortality&#39;)
</pre></div>
</div>
<img alt="_images/31bb63079ab3c118bccea489cefa260a26407ba668136a3d6e651441297d4f42.png" src="_images/31bb63079ab3c118bccea489cefa260a26407ba668136a3d6e651441297d4f42.png" />
</div>
</div>
<p>The uniform distribution assumption for fractional ages linearly interpolates the number of lives between integer ages, whereas the constant force of mortality asssumption uses exponential interpolation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">udd</span> <span class="o">=</span> <span class="n">Fractional</span><span class="p">(</span><span class="n">udd</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">set_survival</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">s</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">)</span>
<span class="n">cfm</span> <span class="o">=</span> <span class="n">Fractional</span><span class="p">(</span><span class="n">udd</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">set_survival</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">s</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="p">[</span><span class="n">udd</span><span class="o">.</span><span class="n">l_r</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="n">r</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">x</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="p">[</span><span class="n">cfm</span><span class="o">.</span><span class="n">l_r</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="n">r</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">x</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;Uniform Distribution&#39;</span><span class="p">,</span> <span class="s1">&#39;Constant Force of Maturity&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Number of lives&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Age&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Fractional Age Assumptions and Interpolation of Lives&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Fractional Age Assumptions and Interpolation of Lives&#39;)
</pre></div>
</div>
<img alt="_images/beb2b4b0c41a72504b00cf24fc78d583e911b949ef54d08ab648695bcca28db9.png" src="_images/beb2b4b0c41a72504b00cf24fc78d583e911b949ef54d08ab648695bcca28db9.png" />
</div>
</div>
<p>The complete future lifetime for fractional limited durations starting from integer ages is computed by the <code class="docutils literal notranslate"><span class="pre">e_r</span></code> class method. Under the hood, when the duration is one year or less, then shortcuts are available for both the uniform distribution and constant force of maturity cases; when the limited duration is more than one year, then the general one-year recursion formula is repeatedly applied until the last period of length less than or equal to one year is reached.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mf">2.</span><span class="p">]</span>
<span class="n">udd</span> <span class="o">=</span> <span class="n">Fractional</span><span class="p">(</span><span class="n">udd</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">set_survival</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">s</span><span class="p">:</span> <span class="mi">50</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">s</span><span class="p">),</span> <span class="n">maxage</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">cfm</span> <span class="o">=</span> <span class="n">Fractional</span><span class="p">(</span><span class="n">udd</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">set_survival</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">s</span><span class="p">:</span> <span class="mf">0.03</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;UDD: &#39;</span><span class="p">,</span> <span class="p">[</span><span class="nb">round</span><span class="p">(</span><span class="n">udd</span><span class="o">.</span><span class="n">e_r</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">t</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">x</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;CFM: &#39;</span><span class="p">,</span> <span class="p">[</span><span class="nb">round</span><span class="p">(</span><span class="n">cfm</span><span class="o">.</span><span class="n">e_r</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">t</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">x</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>UDD:  [0.4975, 0.99, 1.4774, 1.9599]
CFM:  [0.4963, 0.9852, 1.4669, 1.9413]
</pre></div>
</div>
</div>
</div>
<p>The exact results under the assumption of uniform distribution of deaths are often used to approximate between curtate and complete expectations, and can be computed by the <code class="docutils literal notranslate"><span class="pre">e_approximate</span></code> static method</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">Fractional</span><span class="o">.</span><span class="n">e_approximate</span><span class="p">(</span><span class="n">e_complete</span><span class="o">=</span><span class="mi">15</span><span class="p">),</span> 
      <span class="n">Fractional</span><span class="o">.</span><span class="n">e_approximate</span><span class="p">(</span><span class="n">e_complete</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">variance</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Fractional</span><span class="o">.</span><span class="n">e_approximate</span><span class="p">(</span><span class="n">e_curtate</span><span class="o">=</span><span class="mi">15</span><span class="p">),</span> 
      <span class="n">Fractional</span><span class="o">.</span><span class="n">e_approximate</span><span class="p">(</span><span class="n">e_curtate</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">variance</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>14.5 199.91666666666666
15.5 200.08333333333334
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="lifetime.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Expected Future Lifetimes</p>
      </div>
    </a>
    <a class="right-next"
       href="insurance.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Insurance</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#uniform-distribution-of-deaths">Uniform distribution of deaths</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#constant-force-of-mortality">Constant force of mortality</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#methods">Methods</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#examples">Examples</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Terence Lim
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>