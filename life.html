

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Life Contingent Risks &#8212; Solving Actuarial Math with Python</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'life';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Survival Models" href="survival.html" />
    <link rel="prev" title="Interest Theory" href="interest.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="README.html">
  
  
  
  
  
    <p class="title logo__title">Solving Actuarial Math with Python</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="README.html">
                    USER GUIDE
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="actuarial.html">Actuarial Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="interest.html">Interest Theory</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Life Contingent Risks</a></li>
<li class="toctree-l1"><a class="reference internal" href="survival.html">Survival Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="lifetime.html">Expected Future Lifetimes</a></li>
<li class="toctree-l1"><a class="reference internal" href="fractional.html">Fractional Ages</a></li>
<li class="toctree-l1"><a class="reference internal" href="insurance.html">Insurance</a></li>
<li class="toctree-l1"><a class="reference internal" href="annuity.html">Annuities</a></li>
<li class="toctree-l1"><a class="reference internal" href="premiums.html">Premiums</a></li>
<li class="toctree-l1"><a class="reference internal" href="policyvalues.html">Policy Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="reserves.html">Reserves</a></li>
<li class="toctree-l1"><a class="reference internal" href="recursion.html">Recursion</a></li>
<li class="toctree-l1"><a class="reference internal" href="lifetable.html">Life Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="sult.html">SULT</a></li>
<li class="toctree-l1"><a class="reference internal" href="selectlife.html">Select Life Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="mortalitylaws.html">Mortality Laws</a></li>
<li class="toctree-l1"><a class="reference internal" href="constantforce.html">Constant Force of Mortality</a></li>
<li class="toctree-l1"><a class="reference internal" href="extrarisk.html">Extra Risk</a></li>
<li class="toctree-l1"><a class="reference internal" href="mthly.html">1/M’thly</a></li>
<li class="toctree-l1"><a class="reference internal" href="udd.html">UDD M’thly</a></li>
<li class="toctree-l1"><a class="reference internal" href="woolhouse.html">Woolhouse M’thly</a></li>
<li class="toctree-l1"><a class="reference internal" href="faml.html">Sample Solutions and Hints</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/terence-lim/actuarialmath.git" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/terence-lim/actuarialmath.git/issues/new?title=Issue%20on%20page%20%2Flife.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/life.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Life Contingent Risks</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#probability">Probability</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#portfolio-percentile">Portfolio Percentile</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#methods">Methods</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#examples">Examples</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="life-contingent-risks">
<h1>Life Contingent Risks<a class="headerlink" href="#life-contingent-risks" title="Permalink to this heading">#</a></h1>
<p>Life contingencies use probability models as well as interest rate functions. By modeling future lifetimes as random variables, probabilities of survival or death can be calculated. This section reviews essential probability relationships and the moments of common distributions.</p>
<section id="probability">
<h2>Probability<a class="headerlink" href="#probability" title="Permalink to this heading">#</a></h2>
<p>The cumulative distribution function of a r.v. <em>X</em> is the probability <span class="math notranslate nohighlight">\(F(x) = Pr(X \le x)\)</span>. For a continuous r.v., <span class="math notranslate nohighlight">\(f(x) = \frac{d}{dx} F(x)\)</span> is the probability density function. For a discrete r.v. <span class="math notranslate nohighlight">\(p(x) = Pr(X=x)\)</span> is the probability mass function.</p>
<p><span class="math notranslate nohighlight">\(E(x) = \int_{-\infty}^{\infty} xf(x) dx\)</span> when continuous, or <span class="math notranslate nohighlight">\(\sum_x x f(x)\)</span> when discrete</p>
<ul class="simple">
<li><p>is the mean, or first moment of <span class="math notranslate nohighlight">\(X\)</span>.</p></li>
</ul>
<p><span class="math notranslate nohighlight">\(Var(x) = E[(X - E[x])^2]\)</span></p>
<ul class="simple">
<li><p>is the variance, or second central moment of <span class="math notranslate nohighlight">\(X\)</span>, often denoted <span class="math notranslate nohighlight">\(\sigma^2\)</span></p></li>
</ul>
<p><strong>Linearity of expectations</strong></p>
<p><span class="math notranslate nohighlight">\(E(a + bX + cY) = a + bE(X) + cE(Y)\)</span></p>
<ul class="simple">
<li><p>the mean of the sum of random variables is the sum of the means</p></li>
</ul>
<p><strong>Variances</strong></p>
<p><span class="math notranslate nohighlight">\(Var(aX + bY) = a^2~Var(X) + b^2~Var(Y) + 2~a~b~Cov(X,Y)\)</span></p>
<ul class="simple">
<li><p>is the formula to compute the variance of the weighted sum of two random variables</p></li>
</ul>
<p><span class="math notranslate nohighlight">\(Cov(X, Y) = E[XY] - E[X] \cdot E[Y]\)</span></p>
<ul class="simple">
<li><p>is the formula to compute the covariance between two random variables</p></li>
</ul>
<p><strong>Bernoulli</strong>:</p>
<p>The Bernoulli is a discrete distribution that takes one of two values <span class="math notranslate nohighlight">\(Y \in \{a,~b\}\)</span> with probabilities <span class="math notranslate nohighlight">\((p, ~1-p)\)</span></p>
<p><span class="math notranslate nohighlight">\(E[Y] = a~p + b~(1-p)\)</span></p>
<ul class="simple">
<li><p>mean of Bernoulli distribution</p></li>
</ul>
<p><span class="math notranslate nohighlight">\(Var[Y] = (a-b)^2~p~(1-p)\)</span></p>
<ul class="simple">
<li><p>Bernoulli shortcut formula for the variance</p></li>
</ul>
<p><strong>Binomial</strong>:</p>
<p>A binomial r.v. measures the total number of successes from <span class="math notranslate nohighlight">\(N\)</span> independent 0-1 Bernoulli r.v., where each has a probability of success <span class="math notranslate nohighlight">\(p\)</span>.</p>
<p><span class="math notranslate nohighlight">\(E[Y] = N~p\)</span></p>
<ul class="simple">
<li><p>mean of Binomial distribution</p></li>
</ul>
<p><span class="math notranslate nohighlight">\(Var[Y] = N~p~(1-p)\)</span></p>
<ul class="simple">
<li><p>variance of Binomial distribution</p></li>
</ul>
<p><strong>Mixture</strong></p>
<p>A mixture distribution is a random variable <span class="math notranslate nohighlight">\(Y\)</span> whose distribution function can be expressed as a weighted average of the distribution functions of <span class="math notranslate nohighlight">\(n\)</span> random variables <span class="math notranslate nohighlight">\(Y_1, \cdots, Y_n\)</span>. A common case is when Y is a mixture of two Binomial distributions <span class="math notranslate nohighlight">\((p',~N)\)</span>, where <span class="math notranslate nohighlight">\(p' \in (p_1,~p_2)\)</span> with respective probabilities <span class="math notranslate nohighlight">\((p,~1-p)\)</span>: a value is first drawn from a Bernoulli random variable w.p. <span class="math notranslate nohighlight">\(p\)</span>, then depending on its value, a final value is then drawn from the selected one of the two component Binomial distributions.</p>
<p><span class="math notranslate nohighlight">\(E[Y] = p~N~p_1 + (1-p)~N~p_2\)</span></p>
<ul class="simple">
<li><p>mean of mixture of two Binomial distributions</p></li>
</ul>
<p><span class="math notranslate nohighlight">\(Var[Y] = E[Y^2] - E[Y]^2 = E[Var(Y~|~p') + E(Y~|~p')^2] - E[Y]^2\)</span></p>
<ul class="simple">
<li><p>variance of mixture of two Binomial distributions</p></li>
</ul>
<p><strong>Conditional Variance</strong></p>
<p><span class="math notranslate nohighlight">\(Var[Y] = Var(E[Y~|~p']) + E[Var (Y~|~p')]\)</span></p>
<ul class="simple">
<li><p>alternative calculation of the variance of a mixture by using conditional variance formula, where the first term  can be easily calculated using the Bernoulli shortcut, since <span class="math notranslate nohighlight">\(E[Y~|~p']\)</span> is a Bernoulli random variable that takes a value of either <span class="math notranslate nohighlight">\(E[Y~|~p_1]\)</span> or <span class="math notranslate nohighlight">\(E[Y~|~p_2]\)</span> with respective probabilities <span class="math notranslate nohighlight">\((p, 1-p)\)</span></p></li>
</ul>
</section>
<section id="portfolio-percentile">
<h2>Portfolio Percentile<a class="headerlink" href="#portfolio-percentile" title="Permalink to this heading">#</a></h2>
<p><strong>Normal Approximation</strong></p>
<p>A portfolio, <span class="math notranslate nohighlight">\(Y\)</span>, which is the sum of <span class="math notranslate nohighlight">\(N\)</span> iid random variables each with mean <span class="math notranslate nohighlight">\(\mu\)</span> and variance <span class="math notranslate nohighlight">\(\sigma^2\)</span>, has a normal distribution with</p>
<ul class="simple">
<li><p>mean <span class="math notranslate nohighlight">\(E[Y] = N~\mu\)</span> and</p></li>
<li><p>variance <span class="math notranslate nohighlight">\(Var[Y] = N~\sigma^2\)</span></p></li>
</ul>
<p><strong>Percentiles</strong></p>
<p>Percentiles are essentially an inverse function of the cumulative probability distribution. If <span class="math notranslate nohighlight">\(F(y)\)</span> is the cdf for <span class="math notranslate nohighlight">\(Y\)</span>, then the <em>p</em>’th quantile (or <span class="math notranslate nohighlight">\(100p\)</span>’th percentile) is a number <span class="math notranslate nohighlight">\(y_p\)</span> such that <span class="math notranslate nohighlight">\(F(y_p) = Pr(Y \le y_p)= p\)</span>.</p>
<p><span class="math notranslate nohighlight">\(Y_p = E[Y] + z_p~\sqrt{Var[Y]}\)</span></p>
<ul class="simple">
<li><p>value of <span class="math notranslate nohighlight">\(Y\)</span> at percentile <span class="math notranslate nohighlight">\(p\)</span> when Y is normally distributed, where <span class="math notranslate nohighlight">\(z_p\)</span> is the inverse standard normal function <span class="math notranslate nohighlight">\(z_p = \Phi^{-1}(p)\)</span></p></li>
</ul>
</section>
<section id="methods">
<h2>Methods<a class="headerlink" href="#methods" title="Permalink to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">Life</span></code> class implements methods for computing moments and probability distributions of random variables.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>
<span class="kn">from</span> <span class="nn">actuarialmath</span> <span class="kn">import</span> <span class="n">Life</span>
<span class="kn">import</span> <span class="nn">describe</span>
<span class="n">describe</span><span class="o">.</span><span class="n">methods</span><span class="p">(</span><span class="n">Life</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>class Life - Compute moments and probabilities

    Methods:
    --------

    variance(a, b, var_a, var_b, cov_ab):
      Variance of weighted sum of two r.v.

    covariance(a, b, ab):
      Covariance of two r.v.

    bernoulli(p, a, b, variance):
      Mean or variance of bernoulli r.v. with values {a, b}

    binomial(p, N, variance):
      Mean or variance of binomial r.v.

    mixture(p, p1, p2, N, variance):
      Mean or variance of binomial mixture

    conditional_variance(p, p1, p2, N):
      Conditional variance formula for mixture of binomials

    portfolio_percentile(mean, variance, prob, N):
      Probability percentile of the sum of N iid r.v.&#39;s

    set_interest(interest):
      Set interest rate, which can be given in any form

    quantiles_frame(quantiles):
      Display selected quantile values from Normal distribution table
</pre></div>
</div>
</div>
</div>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">variance</span></code> method computes the variance of <span class="math notranslate nohighlight">\(aX + bY\)</span> by plugging in the required inputs into the formula <span class="math notranslate nohighlight">\(a^2~Var(X) + b^2~Var(Y) + 2~a~b~Cov(X,Y)\)</span>. Similarly, the <code class="docutils literal notranslate"><span class="pre">covariance</span></code> method computes the covariance of <span class="math notranslate nohighlight">\(X\)</span> and <span class="math notranslate nohighlight">\(Y\)</span> by pluggin the required inputs into the formula <span class="math notranslate nohighlight">\(E[XY] - E[X] \cdot E[Y]\)</span></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Life</span><span class="o">.</span><span class="n">variance</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">var_a</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">var_b</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">cov_ab</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>133
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Life</span><span class="o">.</span><span class="n">covariance</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">ab</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">bernoulli</span></code> and <code class="docutils literal notranslate"><span class="pre">binomial</span></code> methods compute the mean or variance (by setting the argument <code class="docutils literal notranslate"><span class="pre">variance=True</span></code>) of the respective probability distributions</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">Life</span><span class="o">.</span><span class="n">bernoulli</span><span class="p">(</span><span class="n">p</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">Life</span><span class="o">.</span><span class="n">bernoulli</span><span class="p">(</span><span class="n">p</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">variance</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.5 0.25
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">Life</span><span class="o">.</span><span class="n">binomial</span><span class="p">(</span><span class="n">p</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">100</span><span class="p">),</span> <span class="n">Life</span><span class="o">.</span><span class="n">binomial</span><span class="p">(</span><span class="n">p</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">variance</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>50.0 25.0
</pre></div>
</div>
</div>
</div>
<p>For a mixture of two binomial distribution, the <code class="docutils literal notranslate"><span class="pre">mixture</span></code> method computes the mean or variance, while the <code class="docutils literal notranslate"><span class="pre">conditional_variance</span></code> method computes the variance using the conditional variance formula.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">Life</span><span class="o">.</span><span class="n">mixture</span><span class="p">(</span><span class="n">p</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">p1</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">p2</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">100</span><span class="p">),</span>
      <span class="n">Life</span><span class="o">.</span><span class="n">mixture</span><span class="p">(</span><span class="n">p</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">p1</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">p2</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">variance</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>35.0 47.5
</pre></div>
</div>
</div>
</div>
<p>The sum of <span class="math notranslate nohighlight">\(N\)</span> iid r.v. with identical mean and variance can be approximated by a normal distribution that is computed by the <code class="docutils literal notranslate"><span class="pre">portfolio_cdf</span></code> method, or whose <span class="math notranslate nohighlight">\(100p\)</span>’th percentile is computed by the <code class="docutils literal notranslate"><span class="pre">portfolio_percentile</span></code> method.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Life</span><span class="o">.</span><span class="n">portfolio_cdf</span><span class="p">(</span><span class="n">mean</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">variance</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.7602499389065233
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Life</span><span class="o">.</span><span class="n">portfolio_percentile</span><span class="p">(</span><span class="n">mean</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">variance</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">prob</span><span class="o">=</span><span class="mf">0.76</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4.994313317536634
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">set_interest</span></code> method is called to initialize and store an <code class="docutils literal notranslate"><span class="pre">Interest</span></code> object with the assumed interest rate, expressed in any annual or <span class="math notranslate nohighlight">\(m\)</span>-thly form, which is used in all subsequent life contingency computations.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">Life</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="n">life</span><span class="o">.</span><span class="n">interest</span><span class="o">.</span><span class="n">delta</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.04879016416943205
</pre></div>
</div>
</div>
</div>
<p><strong>SOA Question 2.2</strong>:</p>
<p>Scientists are searching for a vaccine for a disease. You are given:</p>
<ul class="simple">
<li><p>100,000 lives age x are exposed to the disease</p></li>
<li><p>Future lifetimes are independent, except that the vaccine, if available, will be given to all at the end of year 1</p></li>
<li><p>The probability that the vaccine will be available is 0.2</p></li>
<li><p>For each life during year 1, <span class="math notranslate nohighlight">\(q_x\)</span> = 0.02</p></li>
<li><p>For each life during year 2, <span class="math notranslate nohighlight">\(q_{x+1}\)</span> = 0.01 if the vaccine has been given and <span class="math notranslate nohighlight">\(q_{x+1}\)</span> = 0.02 if it has not been given</p></li>
</ul>
<p>Calculate the standard deviation of the number of survivors at the end of year 2.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;SOA Question 2.2: (D) 400&quot;</span><span class="p">)</span>
<span class="n">p1</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.</span> <span class="o">-</span> <span class="mf">0.02</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.</span> <span class="o">-</span> <span class="mf">0.01</span><span class="p">)</span>  <span class="c1"># 2_p_x if vaccine given</span>
<span class="n">p2</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.</span> <span class="o">-</span> <span class="mf">0.02</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.</span> <span class="o">-</span> <span class="mf">0.02</span><span class="p">)</span>  <span class="c1"># 2_p_x if vaccine not given</span>
<span class="nb">print</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">Life</span><span class="o">.</span><span class="n">conditional_variance</span><span class="p">(</span><span class="n">p</span><span class="o">=</span><span class="mf">.2</span><span class="p">,</span> <span class="n">p1</span><span class="o">=</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="o">=</span><span class="n">p2</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">100000</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">Life</span><span class="o">.</span><span class="n">mixture</span><span class="p">(</span><span class="n">p</span><span class="o">=</span><span class="mf">.2</span><span class="p">,</span> <span class="n">p1</span><span class="o">=</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="o">=</span><span class="n">p2</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">100000</span><span class="p">,</span> <span class="n">variance</span><span class="o">=</span><span class="kc">True</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>SOA Question 2.2: (D) 400
396.5914603215815
396.5914603237804
</pre></div>
</div>
</div>
</div>
<p><strong>Normal distribution table</strong>:</p>
<p>The <code class="docutils literal notranslate"><span class="pre">quantiles_frame</span></code> method displays an extract of normal distribution table for common quantile values, that is made available during SOA FAM-L exam.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Values of z for selected values of Pr(Z&lt;=z)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-------------------------------------------&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Life</span><span class="o">.</span><span class="n">quantiles_frame</span><span class="p">()</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">float_format</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Values of z for selected values of Pr(Z&lt;=z)
-------------------------------------------
z         0.842  1.036  1.282  1.645  1.960  2.326  2.576
Pr(Z&lt;=z)  0.800  0.850  0.900  0.950  0.975  0.990  0.995
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="interest.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Interest Theory</p>
      </div>
    </a>
    <a class="right-next"
       href="survival.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Survival Models</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#probability">Probability</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#portfolio-percentile">Portfolio Percentile</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#methods">Methods</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#examples">Examples</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Terence Lim
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>