

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Sample Solutions and Hints &#8212; Solving Actuarial Math with Python</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'faml';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Woolhouse M’thly" href="woolhouse.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="README.html">
  
  
  
  
  
    <p class="title logo__title">Solving Actuarial Math with Python</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="README.html">
                    Introduction
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="actuarial.html">Actuarial Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="interest.html">Interest Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="life.html">Life Contingent Risks</a></li>
<li class="toctree-l1"><a class="reference internal" href="survival.html">Survival Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="lifetime.html">Expected Future Lifetimes</a></li>
<li class="toctree-l1"><a class="reference internal" href="fractional.html">Fractional Ages</a></li>
<li class="toctree-l1"><a class="reference internal" href="insurance.html">Insurance</a></li>
<li class="toctree-l1"><a class="reference internal" href="annuity.html">Annuities</a></li>
<li class="toctree-l1"><a class="reference internal" href="premiums.html">Premiums</a></li>
<li class="toctree-l1"><a class="reference internal" href="policyvalues.html">Policy Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="reserves.html">Reserves</a></li>
<li class="toctree-l1"><a class="reference internal" href="lifetable.html">Life Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="sult.html">SULT</a></li>
<li class="toctree-l1"><a class="reference internal" href="selectlife.html">Select Life Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="recursion.html">Recursion</a></li>
<li class="toctree-l1"><a class="reference internal" href="mortalitylaws.html">Mortality Laws</a></li>
<li class="toctree-l1"><a class="reference internal" href="constantforce.html">Constant Force of Mortality</a></li>
<li class="toctree-l1"><a class="reference internal" href="extrarisk.html">Extra Risk</a></li>
<li class="toctree-l1"><a class="reference internal" href="mthly.html">1/M’thly</a></li>
<li class="toctree-l1"><a class="reference internal" href="udd.html">UDD M’thly</a></li>
<li class="toctree-l1"><a class="reference internal" href="woolhouse.html">Woolhouse M’thly</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Sample Solutions and Hints</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/terence-lim/actuarialmath.git" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/terence-lim/actuarialmath.git/issues/new?title=Issue%20on%20page%20%2Ffaml.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/faml.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Sample Solutions and Hints</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tables">1 Tables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#survival-models">2 Survival models</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#life-tables-and-selection">3 Life tables and selection</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#insurance-benefits">4 Insurance benefits</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#annuities">5 Annuities</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#premium-calculation">6 Premium Calculation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#policy-values">7 Policy Values</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="sample-solutions-and-hints">
<h1>Sample Solutions and Hints<a class="headerlink" href="#sample-solutions-and-hints" title="Permalink to this heading">#</a></h1>
<p><strong>actuarialmath – Life Contingent Risks with Python</strong></p>
<p>This package implements fundamental methods for modeling life contingent risks, and closely follows traditional topics covered in actuarial exams and standard texts such as the “Fundamentals of Actuarial Math - Long-term” exam syllabus by the Society of Actuaries, and “Actuarial Mathematics for Life Contingent Risks” by Dickson, Hardy and Waters.  These code chunks demonstrate how to solve each of the sample FAM-L exam questions released by the SOA.</p>
<p>Sources:</p>
<ul class="simple">
<li><p>SOA FAM-L Sample Solutions: <a class="reference external" href="https://terence-lim.github.io/notes/2022-10-exam-fam-l-sol.pdf">copy retrieved Aug 2022</a></p></li>
<li><p>SOA FAM-L Sample Questions: <a class="reference external" href="https://terence-lim.github.io/notes/2022-10-exam-fam-l-quest.pdf">copy retrieved Aug 2022</a></p></li>
<li><p><a class="reference external" href="https://terence-lim.github.io/actuarialmath-tutorial/">Online tutorial</a>, or <a class="reference external" href="https://terence-lim.github.io/notes/actuarialmath-tutorial.pdf">download pdf</a></p></li>
<li><p><a class="reference external" href="https://terence-lim.github.io/actuarialmath-docs">Code documentation</a></p></li>
<li><p><a class="reference external" href="https://github.com/terence-lim/actuarialmath.git">Github repo</a> and <a class="reference external" href="https://github.com/terence-lim/actuarialmath/issues">issues</a></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="ch">#! pip install actuarialmath</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Solutions code and hints for SOA FAM-L sample questions</span>

<span class="sd">MIT License.  Copyright 2022-2023, Terence Lim</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">actuarialmath.interest</span> <span class="kn">import</span> <span class="n">Interest</span>
<span class="kn">from</span> <span class="nn">actuarialmath.life</span> <span class="kn">import</span> <span class="n">Life</span>
<span class="kn">from</span> <span class="nn">actuarialmath.survival</span> <span class="kn">import</span> <span class="n">Survival</span>
<span class="kn">from</span> <span class="nn">actuarialmath.lifetime</span> <span class="kn">import</span> <span class="n">Lifetime</span>
<span class="kn">from</span> <span class="nn">actuarialmath.fractional</span> <span class="kn">import</span> <span class="n">Fractional</span>
<span class="kn">from</span> <span class="nn">actuarialmath.insurance</span> <span class="kn">import</span> <span class="n">Insurance</span>
<span class="kn">from</span> <span class="nn">actuarialmath.annuity</span> <span class="kn">import</span> <span class="n">Annuity</span>
<span class="kn">from</span> <span class="nn">actuarialmath.premiums</span> <span class="kn">import</span> <span class="n">Premiums</span>
<span class="kn">from</span> <span class="nn">actuarialmath.policyvalues</span> <span class="kn">import</span> <span class="n">PolicyValues</span><span class="p">,</span> <span class="n">Contract</span>
<span class="kn">from</span> <span class="nn">actuarialmath.reserves</span> <span class="kn">import</span> <span class="n">Reserves</span>
<span class="kn">from</span> <span class="nn">actuarialmath.recursion</span> <span class="kn">import</span> <span class="n">Recursion</span>
<span class="kn">from</span> <span class="nn">actuarialmath.lifetable</span> <span class="kn">import</span> <span class="n">LifeTable</span>
<span class="kn">from</span> <span class="nn">actuarialmath.sult</span> <span class="kn">import</span> <span class="n">SULT</span>
<span class="kn">from</span> <span class="nn">actuarialmath.selectlife</span> <span class="kn">import</span> <span class="n">SelectLife</span>
<span class="kn">from</span> <span class="nn">actuarialmath.mortalitylaws</span> <span class="kn">import</span> <span class="n">MortalityLaws</span><span class="p">,</span> <span class="n">Beta</span><span class="p">,</span> <span class="n">Uniform</span><span class="p">,</span> <span class="n">Makeham</span><span class="p">,</span> <span class="n">Gompertz</span>
<span class="kn">from</span> <span class="nn">actuarialmath.constantforce</span> <span class="kn">import</span> <span class="n">ConstantForce</span>
<span class="kn">from</span> <span class="nn">actuarialmath.extrarisk</span> <span class="kn">import</span> <span class="n">ExtraRisk</span>
<span class="kn">from</span> <span class="nn">actuarialmath.mthly</span> <span class="kn">import</span> <span class="n">Mthly</span>
<span class="kn">from</span> <span class="nn">actuarialmath.udd</span> <span class="kn">import</span> <span class="n">UDD</span>
<span class="kn">from</span> <span class="nn">actuarialmath.woolhouse</span> <span class="kn">import</span> <span class="n">Woolhouse</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Helper to compare computed answers to expected solutions</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">IsClose</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Helper class for testing and reporting if two values are close&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rel_tol</span> <span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">,</span> <span class="n">score</span> <span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                 <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">den</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="n">score</span>      <span class="c1"># whether to count INCORRECTs instead of assert</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="n">verbose</span>  <span class="c1"># whether to run silently</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">incorrect</span> <span class="o">=</span> <span class="p">[]</span>     <span class="c1"># to keep list of messages for INCORRECT</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tol</span> <span class="o">=</span> <span class="n">rel_tol</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solution</span><span class="p">,</span> <span class="n">answer</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">rel_tol</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Compare solution to answer within relative tolerance</span>

<span class="sd">        Args:</span>
<span class="sd">          solution (str | numeric) : gold label</span>
<span class="sd">          answer (str | numeric) : computed answer</span>
<span class="sd">          question (str) : label to associate with this test</span>
<span class="sd">          rel_tol (float) : relative tolerance to be considered close</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">solution</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">isclose</span> <span class="o">=</span> <span class="p">(</span><span class="n">solution</span> <span class="o">==</span> <span class="n">answer</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">isclose</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">solution</span><span class="p">,</span> <span class="n">answer</span><span class="p">,</span> <span class="n">rel_tol</span><span class="o">=</span><span class="n">rel_tol</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">tol</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">den</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num</span> <span class="o">+=</span> <span class="n">isclose</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">question</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">solution</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">answer</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-----&quot;</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="s2">&quot;[OK]&quot;</span> <span class="k">if</span> <span class="n">isclose</span> <span class="k">else</span> <span class="s2">&quot;[INCORRECT]&quot;</span><span class="p">,</span> <span class="s2">&quot;-----&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">score</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">isclose</span><span class="p">,</span> <span class="n">msg</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">isclose</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">incorrect</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">isclose</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Display cumulative score and errors&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Passed: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">den</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">incorrect</span><span class="p">)</span>
<span class="n">isclose</span> <span class="o">=</span> <span class="n">IsClose</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">score</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="tables">
<h2>1 Tables<a class="headerlink" href="#tables" title="Permalink to this heading">#</a></h2>
<p>These tables are provided in the FAM-L exam</p>
<ul class="simple">
<li><p>Interest Functions at i=0.05</p></li>
<li><p>Normal Distribution Table</p></li>
<li><p>Standard Ultimate Life Table</p></li>
</ul>
<p>but you actually do not need them here!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Interest Functions at i=0.05&quot;</span><span class="p">)</span>
<span class="n">UDD</span><span class="o">.</span><span class="n">interest_frame</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Interest Functions at i=0.05
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>i(m)</th>
      <th>d(m)</th>
      <th>i/i(m)</th>
      <th>d/d(m)</th>
      <th>alpha(m)</th>
      <th>beta(m)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>0.05000</td>
      <td>0.04762</td>
      <td>1.00000</td>
      <td>1.00000</td>
      <td>1.00000</td>
      <td>0.00000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.04939</td>
      <td>0.04820</td>
      <td>1.01235</td>
      <td>0.98795</td>
      <td>1.00015</td>
      <td>0.25617</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.04909</td>
      <td>0.04849</td>
      <td>1.01856</td>
      <td>0.98196</td>
      <td>1.00019</td>
      <td>0.38272</td>
    </tr>
    <tr>
      <th>12</th>
      <td>0.04889</td>
      <td>0.04869</td>
      <td>1.02271</td>
      <td>0.97798</td>
      <td>1.00020</td>
      <td>0.46651</td>
    </tr>
    <tr>
      <th>0</th>
      <td>0.04879</td>
      <td>0.04879</td>
      <td>1.02480</td>
      <td>0.97600</td>
      <td>1.00020</td>
      <td>0.50823</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Values of z for selected values of Pr(Z&lt;=z)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Life</span><span class="o">.</span><span class="n">quantiles_frame</span><span class="p">()</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">float_format</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Values of z for selected values of Pr(Z&lt;=z)
z         0.842  1.036  1.282  1.645  1.960  2.326  2.576
Pr(Z&lt;=z)  0.800  0.850  0.900  0.950  0.975  0.990  0.995
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Standard Ultimate Life Table at i=0.05&quot;</span><span class="p">)</span>
<span class="n">SULT</span><span class="p">()</span><span class="o">.</span><span class="n">frame</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Standard Ultimate Life Table at i=0.05
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>l_x</th>
      <th>q_x</th>
      <th>a_x</th>
      <th>A_x</th>
      <th>2A_x</th>
      <th>a_x:10</th>
      <th>A_x:10</th>
      <th>a_x:20</th>
      <th>A_x:20</th>
      <th>5_E_x</th>
      <th>10_E_x</th>
      <th>20_E_x</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>20</th>
      <td>100000.0</td>
      <td>0.000250</td>
      <td>19.9664</td>
      <td>0.04922</td>
      <td>0.00580</td>
      <td>8.0991</td>
      <td>0.61433</td>
      <td>13.0559</td>
      <td>0.37829</td>
      <td>0.78252</td>
      <td>0.61224</td>
      <td>0.37440</td>
    </tr>
    <tr>
      <th>21</th>
      <td>99975.0</td>
      <td>0.000253</td>
      <td>19.9197</td>
      <td>0.05144</td>
      <td>0.00614</td>
      <td>8.0990</td>
      <td>0.61433</td>
      <td>13.0551</td>
      <td>0.37833</td>
      <td>0.78250</td>
      <td>0.61220</td>
      <td>0.37429</td>
    </tr>
    <tr>
      <th>22</th>
      <td>99949.7</td>
      <td>0.000257</td>
      <td>19.8707</td>
      <td>0.05378</td>
      <td>0.00652</td>
      <td>8.0988</td>
      <td>0.61434</td>
      <td>13.0541</td>
      <td>0.37837</td>
      <td>0.78248</td>
      <td>0.61215</td>
      <td>0.37417</td>
    </tr>
    <tr>
      <th>23</th>
      <td>99924.0</td>
      <td>0.000262</td>
      <td>19.8193</td>
      <td>0.05622</td>
      <td>0.00694</td>
      <td>8.0986</td>
      <td>0.61435</td>
      <td>13.0531</td>
      <td>0.37842</td>
      <td>0.78245</td>
      <td>0.61210</td>
      <td>0.37404</td>
    </tr>
    <tr>
      <th>24</th>
      <td>99897.8</td>
      <td>0.000267</td>
      <td>19.7655</td>
      <td>0.05879</td>
      <td>0.00739</td>
      <td>8.0983</td>
      <td>0.61437</td>
      <td>13.0519</td>
      <td>0.37848</td>
      <td>0.78243</td>
      <td>0.61205</td>
      <td>0.37390</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>96</th>
      <td>17501.8</td>
      <td>0.192887</td>
      <td>3.5597</td>
      <td>0.83049</td>
      <td>0.69991</td>
      <td>3.5356</td>
      <td>0.83164</td>
      <td>3.5597</td>
      <td>0.83049</td>
      <td>0.19872</td>
      <td>0.01330</td>
      <td>0.00000</td>
    </tr>
    <tr>
      <th>97</th>
      <td>14125.9</td>
      <td>0.214030</td>
      <td>3.3300</td>
      <td>0.84143</td>
      <td>0.71708</td>
      <td>3.3159</td>
      <td>0.84210</td>
      <td>3.3300</td>
      <td>0.84143</td>
      <td>0.16765</td>
      <td>0.00827</td>
      <td>0.00000</td>
    </tr>
    <tr>
      <th>98</th>
      <td>11102.5</td>
      <td>0.237134</td>
      <td>3.1127</td>
      <td>0.85177</td>
      <td>0.73356</td>
      <td>3.1050</td>
      <td>0.85214</td>
      <td>3.1127</td>
      <td>0.85177</td>
      <td>0.13850</td>
      <td>0.00485</td>
      <td>0.00000</td>
    </tr>
    <tr>
      <th>99</th>
      <td>8469.7</td>
      <td>0.262294</td>
      <td>2.9079</td>
      <td>0.86153</td>
      <td>0.74930</td>
      <td>2.9039</td>
      <td>0.86172</td>
      <td>2.9079</td>
      <td>0.86153</td>
      <td>0.11173</td>
      <td>0.00266</td>
      <td>0.00000</td>
    </tr>
    <tr>
      <th>100</th>
      <td>6248.2</td>
      <td>0.289584</td>
      <td>2.7156</td>
      <td>0.87068</td>
      <td>0.76427</td>
      <td>2.7137</td>
      <td>0.87078</td>
      <td>2.7156</td>
      <td>0.87068</td>
      <td>0.08777</td>
      <td>0.00136</td>
      <td>0.00000</td>
    </tr>
  </tbody>
</table>
<p>81 rows × 12 columns</p>
</div></div></div>
</div>
</section>
<section id="survival-models">
<h2>2 Survival models<a class="headerlink" href="#survival-models" title="Permalink to this heading">#</a></h2>
<p>SOA Question 2.1: (B) 2.5</p>
<ul class="simple">
<li><p>derive formula for <span class="math notranslate nohighlight">\(\mu\)</span> from given survival function</p></li>
<li><p>solve for <span class="math notranslate nohighlight">\(\omega\)</span> given <span class="math notranslate nohighlight">\(\mu_{65}\)</span></p></li>
<li><p>calculate <span class="math notranslate nohighlight">\(e\)</span> by summing survival probabilities</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">Lifetime</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">mu_from_l</span><span class="p">(</span><span class="n">omega</span><span class="p">):</span>   <span class="c1"># first solve for omega, given mu_65 = 1/180            </span>
    <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">set_survival</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">s</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">s</span><span class="p">)</span><span class="o">/</span><span class="n">omega</span><span class="p">)</span><span class="o">**</span><span class="mf">0.25</span><span class="p">)</span><span class="o">.</span><span class="n">mu_x</span><span class="p">(</span><span class="mi">65</span><span class="p">)</span>
<span class="n">omega</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">mu_from_l</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mi">180</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="mi">100</span><span class="p">))</span>
<span class="n">e</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">set_survival</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">s</span><span class="p">:(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">s</span><span class="p">)</span><span class="o">/</span><span class="n">omega</span><span class="p">)</span><span class="o">**</span><span class="mf">.25</span><span class="p">,</span> <span class="n">maxage</span><span class="o">=</span><span class="n">omega</span><span class="p">)</span>\
        <span class="o">.</span><span class="n">e_x</span><span class="p">(</span><span class="mi">106</span><span class="p">)</span>       <span class="c1"># then solve expected lifetime from omega              </span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q2.1&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q2.1 2.5: 2.4786080555423604 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 2.2: (D) 400</p>
<ul class="simple">
<li><p>calculate survival probabilities for the two scenarios</p></li>
<li><p>apply conditional variance formula (or mixed distribution)</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p1</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.</span> <span class="o">-</span> <span class="mf">0.02</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.</span> <span class="o">-</span> <span class="mf">0.01</span><span class="p">)</span>  <span class="c1"># 2_p_x if vaccine given</span>
<span class="n">p2</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.</span> <span class="o">-</span> <span class="mf">0.02</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.</span> <span class="o">-</span> <span class="mf">0.02</span><span class="p">)</span>  <span class="c1"># 2_p_x if vaccine not given</span>
<span class="n">std</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">Life</span><span class="o">.</span><span class="n">conditional_variance</span><span class="p">(</span><span class="n">p</span><span class="o">=</span><span class="mf">.2</span><span class="p">,</span> <span class="n">p1</span><span class="o">=</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="o">=</span><span class="n">p2</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">100000</span><span class="p">))</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="n">std</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q2.2&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q2.2 400: 396.5914603215815 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 2.3: (A) 0.0483</p>
<ol class="arabic simple">
<li><p>Derive formula for <span class="math notranslate nohighlight">\(f\)</span> given survival function</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">B</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mf">0.00027</span><span class="p">,</span> <span class="mf">1.1</span>
<span class="n">S</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">t</span><span class="p">:</span> <span class="n">math</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">B</span> <span class="o">*</span> <span class="n">c</span><span class="o">**</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">s</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">c</span><span class="o">**</span><span class="n">t</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">Survival</span><span class="p">()</span><span class="o">.</span><span class="n">set_survival</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">S</span><span class="p">)</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">f_x</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.0483</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q2.3&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q2.3 0.0483: 0.048327399045049846 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 2.4: (E) 8.2</p>
<ul class="simple">
<li><p>derive survival probability function <span class="math notranslate nohighlight">\(_tp_x\)</span> given <span class="math notranslate nohighlight">\(_tq_0\)</span></p></li>
<li><p>compute <span class="math notranslate nohighlight">\(\overset{\circ}{e}\)</span> by integration</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">l</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span> <span class="k">return</span> <span class="mf">0.</span> <span class="k">if</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">s</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">100</span> <span class="k">else</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">((</span><span class="n">x</span> <span class="o">+</span> <span class="n">s</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="mf">10000.</span>
<span class="n">e</span> <span class="o">=</span> <span class="n">Lifetime</span><span class="p">()</span><span class="o">.</span><span class="n">set_survival</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="n">l</span><span class="p">)</span><span class="o">.</span><span class="n">e_x</span><span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">curtate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">8.2</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q2.4&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q2.4 8.2: 8.20952380952381 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 2.5:  (B) 37.1</p>
<ul class="simple">
<li><p>solve for <span class="math notranslate nohighlight">\(e_{40}\)</span> from limited lifetime formula</p></li>
<li><p>compute <span class="math notranslate nohighlight">\(e_{41}\)</span> using backward recursion</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">set_e</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">curtate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>\
                               <span class="o">.</span><span class="n">set_q</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>\
                               <span class="o">.</span><span class="n">set_q</span><span class="p">(</span><span class="mf">0.003</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">e</span><span class="p">):</span>   <span class="c1"># solve e_40 from e_40:20 = e_40 - 20_p_40 e_60</span>
    <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">set_e</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">curtate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>\
               <span class="o">.</span><span class="n">e_x</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">curtate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">e40</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">[</span><span class="mi">36</span><span class="p">,</span> <span class="mi">41</span><span class="p">])</span>
<span class="n">life</span><span class="o">.</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span>
<span class="n">fun</span><span class="p">(</span><span class="n">e40</span><span class="p">)</span>
<span class="n">e41</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">e_x</span><span class="p">(</span><span class="mi">41</span><span class="p">,</span> <span class="n">curtate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">37.1</span><span class="p">,</span> <span class="n">e41</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q2.5&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q2.5 37.1: 37.11434302908726 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 2.6: (C) 13.3</p>
<ul class="simple">
<li><p>derive force of mortality function <span class="math notranslate nohighlight">\(\mu\)</span> from given survival function</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">Survival</span><span class="p">()</span><span class="o">.</span><span class="n">set_survival</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">s</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">s</span><span class="p">)</span><span class="o">/</span><span class="mi">60</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">))</span>
<span class="n">mu</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">*</span> <span class="n">life</span><span class="o">.</span><span class="n">mu_x</span><span class="p">(</span><span class="mi">35</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">13.3</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q2.6&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q2.6 13.3: 13.340451278922776 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 2.7: (B) 0.1477</p>
<ul class="simple">
<li><p>calculate from given survival function</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">s</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="p">((</span><span class="n">x</span><span class="o">+</span><span class="n">s</span><span class="p">)</span><span class="o">/</span><span class="mi">250</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">s</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">40</span> <span class="k">else</span> <span class="mi">1</span><span class="o">-</span><span class="p">((</span><span class="n">x</span><span class="o">+</span><span class="n">s</span><span class="p">)</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">Survival</span><span class="p">()</span><span class="o">.</span><span class="n">set_survival</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="n">l</span><span class="p">)</span><span class="o">.</span><span class="n">q_x</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.1477</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q2.7&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q2.7 0.1477: 0.1477272727272727 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 2.8: (C) 0.94</p>
<ul class="simple">
<li><p>relate <span class="math notranslate nohighlight">\(p_{male}\)</span> and <span class="math notranslate nohighlight">\(p_{female}\)</span> through the common term <span class="math notranslate nohighlight">\(\mu\)</span> and the given proportions</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">mu</span><span class="p">):</span>  <span class="c1"># Solve first for mu, given ratio of start and end proportions</span>
    <span class="n">male</span> <span class="o">=</span> <span class="n">Survival</span><span class="p">()</span><span class="o">.</span><span class="n">set_survival</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">s</span><span class="p">:</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">mu</span><span class="p">)</span>
    <span class="n">female</span> <span class="o">=</span> <span class="n">Survival</span><span class="p">()</span><span class="o">.</span><span class="n">set_survival</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">s</span><span class="p">:</span> <span class="n">mu</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="mi">75</span> <span class="o">*</span> <span class="n">female</span><span class="o">.</span><span class="n">p_x</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">20</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="mi">25</span> <span class="o">*</span> <span class="n">male</span><span class="o">.</span><span class="n">p_x</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">20</span><span class="p">))</span>
<span class="n">mu</span> <span class="o">=</span> <span class="n">Survival</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">85</span><span class="o">/</span><span class="mi">15</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">[</span><span class="mf">0.89</span><span class="p">,</span> <span class="mf">0.99</span><span class="p">])</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">Survival</span><span class="p">()</span><span class="o">.</span><span class="n">set_survival</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">s</span><span class="p">:</span> <span class="n">mu</span><span class="p">)</span><span class="o">.</span><span class="n">p_x</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.94</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q2.8&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q2.8 0.94: 0.9383813306903799 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
</section>
<section id="life-tables-and-selection">
<h2>3 Life tables and selection<a class="headerlink" href="#life-tables-and-selection" title="Permalink to this heading">#</a></h2>
<p>SOA Question 3.1:  (B) 117</p>
<ul class="simple">
<li><p>interpolate with constant force of maturity</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SelectLife</span><span class="p">()</span><span class="o">.</span><span class="n">set_table</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="p">{</span><span class="mi">60</span><span class="p">:</span> <span class="p">[</span><span class="mi">80000</span><span class="p">,</span> <span class="mi">79000</span><span class="p">,</span> <span class="mi">77000</span><span class="p">,</span> <span class="mi">74000</span><span class="p">],</span>
                                 <span class="mi">61</span><span class="p">:</span> <span class="p">[</span><span class="mi">78000</span><span class="p">,</span> <span class="mi">76000</span><span class="p">,</span> <span class="mi">73000</span><span class="p">,</span> <span class="mi">70000</span><span class="p">],</span>
                                 <span class="mi">62</span><span class="p">:</span> <span class="p">[</span><span class="mi">75000</span><span class="p">,</span> <span class="mi">72000</span><span class="p">,</span> <span class="mi">69000</span><span class="p">,</span> <span class="mi">67000</span><span class="p">],</span>
                                 <span class="mi">63</span><span class="p">:</span> <span class="p">[</span><span class="mi">71000</span><span class="p">,</span> <span class="mi">68000</span><span class="p">,</span> <span class="mi">66000</span><span class="p">,</span> <span class="mi">65000</span><span class="p">]})</span>
<span class="n">q</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">*</span> <span class="n">life</span><span class="o">.</span><span class="n">q_r</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">117</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q3.1&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q3.1 117: 116.7192429022082 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 3.2:  (D) 14.7</p>
<ul class="simple">
<li><p>UDD <span class="math notranslate nohighlight">\(\Rightarrow \overset{\circ}{e}_{x} = e_x + 0.5\)</span></p></li>
<li><p>fill select table using curtate expectations</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">e_curtate</span> <span class="o">=</span> <span class="n">Fractional</span><span class="o">.</span><span class="n">e_approximate</span><span class="p">(</span><span class="n">e_complete</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">SelectLife</span><span class="p">(</span><span class="n">udd</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">set_table</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="p">{</span><span class="mi">65</span><span class="p">:</span> <span class="p">[</span><span class="mi">1000</span><span class="p">,</span> <span class="kc">None</span><span class="p">,],</span>
                                         <span class="mi">66</span><span class="p">:</span> <span class="p">[</span><span class="mi">955</span><span class="p">,</span> <span class="kc">None</span><span class="p">]},</span>
                                      <span class="n">e</span><span class="o">=</span><span class="p">{</span><span class="mi">65</span><span class="p">:</span> <span class="p">[</span><span class="n">e_curtate</span><span class="p">,</span> <span class="kc">None</span><span class="p">]},</span>
                                      <span class="n">d</span><span class="o">=</span><span class="p">{</span><span class="mi">65</span><span class="p">:</span> <span class="p">[</span><span class="mi">40</span><span class="p">,</span> <span class="kc">None</span><span class="p">,],</span>
                                         <span class="mi">66</span><span class="p">:</span> <span class="p">[</span><span class="mi">45</span><span class="p">,</span> <span class="kc">None</span><span class="p">]})</span>
<span class="n">e</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">e_r</span><span class="p">(</span><span class="mi">66</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">14.7</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q3.2&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q3.2 14.7: 14.67801047120419 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 3.3:  (E) 1074</p>
<ul class="simple">
<li><p>interpolate lives between integer ages with UDD</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SelectLife</span><span class="p">()</span><span class="o">.</span><span class="n">set_table</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="p">{</span><span class="mi">50</span><span class="p">:</span> <span class="p">[</span><span class="mi">99</span><span class="p">,</span> <span class="mi">96</span><span class="p">,</span> <span class="mi">93</span><span class="p">],</span>
                                 <span class="mi">51</span><span class="p">:</span> <span class="p">[</span><span class="mi">97</span><span class="p">,</span> <span class="mi">93</span><span class="p">,</span> <span class="mi">89</span><span class="p">],</span>
                                 <span class="mi">52</span><span class="p">:</span> <span class="p">[</span><span class="mi">93</span><span class="p">,</span> <span class="mi">88</span><span class="p">,</span> <span class="mi">83</span><span class="p">],</span>
                                 <span class="mi">53</span><span class="p">:</span> <span class="p">[</span><span class="mi">90</span><span class="p">,</span> <span class="mi">84</span><span class="p">,</span> <span class="mi">78</span><span class="p">]})</span>
<span class="n">q</span> <span class="o">=</span> <span class="mi">10000</span> <span class="o">*</span> <span class="n">life</span><span class="o">.</span><span class="n">q_r</span><span class="p">(</span><span class="mi">51</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mf">2.2</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">1074</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q3.3&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q3.3 1074: 1073.684210526316 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 3.4:  (B) 815</p>
<ul class="simple">
<li><p>compute portfolio percentile with N=4000, and mean and variance  from binomial distribution</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sult</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">mean</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">p_x</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">95</span><span class="o">-</span><span class="mi">25</span><span class="p">)</span>
<span class="n">var</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">bernoulli</span><span class="p">(</span><span class="n">mean</span><span class="p">,</span> <span class="n">variance</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">pct</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">portfolio_percentile</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">4000</span><span class="p">,</span> <span class="n">mean</span><span class="o">=</span><span class="n">mean</span><span class="p">,</span> <span class="n">variance</span><span class="o">=</span><span class="n">var</span><span class="p">,</span> <span class="n">prob</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">815</span><span class="p">,</span> <span class="n">pct</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q3.4&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q3.4 815: 815.0943255167722 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 3.5:  (E) 106</p>
<ul class="simple">
<li><p>compute mortality rates by interpolating lives between integer ages, with UDD and constant force of mortality assumptions</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">99999</span><span class="p">,</span> <span class="mi">88888</span><span class="p">,</span> <span class="mi">77777</span><span class="p">,</span> <span class="mi">66666</span><span class="p">,</span> <span class="mi">55555</span><span class="p">,</span> <span class="mi">44444</span><span class="p">,</span> <span class="mi">33333</span><span class="p">,</span> <span class="mi">22222</span><span class="p">]</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">LifeTable</span><span class="p">(</span><span class="n">udd</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">set_table</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="p">{</span><span class="n">age</span><span class="p">:</span><span class="n">l</span> <span class="k">for</span> <span class="n">age</span><span class="p">,</span><span class="n">l</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">68</span><span class="p">),</span> <span class="n">l</span><span class="p">)})</span>\
                       <span class="o">.</span><span class="n">q_r</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mf">3.4</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mf">2.5</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">LifeTable</span><span class="p">(</span><span class="n">udd</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">set_table</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="p">{</span><span class="n">age</span><span class="p">:</span><span class="n">l</span> <span class="k">for</span> <span class="n">age</span><span class="p">,</span><span class="n">l</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">68</span><span class="p">),</span> <span class="n">l</span><span class="p">)})</span>\
                        <span class="o">.</span><span class="n">q_r</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mf">3.4</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mf">2.5</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">106</span><span class="p">,</span> <span class="mi">100000</span> <span class="o">*</span> <span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="p">),</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q3.5&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q3.5 106: 106.16575827938624 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 3.6:  (D) 15.85</p>
<ul class="simple">
<li><p>apply recursion formulas for curtate expectation</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">e</span> <span class="o">=</span> <span class="n">SelectLife</span><span class="p">()</span><span class="o">.</span><span class="n">set_table</span><span class="p">(</span><span class="n">q</span><span class="o">=</span><span class="p">{</span><span class="mi">60</span><span class="p">:</span> <span class="p">[</span><span class="mf">.09</span><span class="p">,</span> <span class="mf">.11</span><span class="p">,</span> <span class="mf">.13</span><span class="p">,</span> <span class="mf">.15</span><span class="p">],</span>
                              <span class="mi">61</span><span class="p">:</span> <span class="p">[</span><span class="mf">.1</span><span class="p">,</span> <span class="mf">.12</span><span class="p">,</span> <span class="mf">.14</span><span class="p">,</span> <span class="mf">.16</span><span class="p">],</span>
                              <span class="mi">62</span><span class="p">:</span> <span class="p">[</span><span class="mf">.11</span><span class="p">,</span> <span class="mf">.13</span><span class="p">,</span> <span class="mf">.15</span><span class="p">,</span> <span class="mf">.17</span><span class="p">],</span>
                              <span class="mi">63</span><span class="p">:</span> <span class="p">[</span><span class="mf">.12</span><span class="p">,</span> <span class="mf">.14</span><span class="p">,</span> <span class="mf">.16</span><span class="p">,</span> <span class="mf">.18</span><span class="p">],</span>
                              <span class="mi">64</span><span class="p">:</span> <span class="p">[</span><span class="mf">.13</span><span class="p">,</span> <span class="mf">.15</span><span class="p">,</span> <span class="mf">.17</span><span class="p">,</span> <span class="mf">.19</span><span class="p">]},</span>
                           <span class="n">e</span><span class="o">=</span><span class="p">{</span><span class="mi">61</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mf">5.1</span><span class="p">]})</span>\
                <span class="o">.</span><span class="n">e_x</span><span class="p">(</span><span class="mi">61</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">5.85</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q3.6&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q3.6 5.85: 5.846832 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 3.7: (b) 16.4</p>
<ul class="simple">
<li><p>use deferred mortality formula</p></li>
<li><p>use chain rule for survival probabilities,</p></li>
<li><p>interpolate between integer ages with constant force of mortality</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SelectLife</span><span class="p">()</span><span class="o">.</span><span class="n">set_table</span><span class="p">(</span><span class="n">q</span><span class="o">=</span><span class="p">{</span><span class="mi">50</span><span class="p">:</span> <span class="p">[</span><span class="mf">.0050</span><span class="p">,</span> <span class="mf">.0063</span><span class="p">,</span> <span class="mf">.0080</span><span class="p">],</span>
                                 <span class="mi">51</span><span class="p">:</span> <span class="p">[</span><span class="mf">.0060</span><span class="p">,</span> <span class="mf">.0073</span><span class="p">,</span> <span class="mf">.0090</span><span class="p">],</span>
                                 <span class="mi">52</span><span class="p">:</span> <span class="p">[</span><span class="mf">.0070</span><span class="p">,</span> <span class="mf">.0083</span><span class="p">,</span> <span class="mf">.0100</span><span class="p">],</span>
                                 <span class="mi">53</span><span class="p">:</span> <span class="p">[</span><span class="mf">.0080</span><span class="p">,</span> <span class="mf">.0093</span><span class="p">,</span> <span class="mf">.0110</span><span class="p">]})</span>
<span class="n">q</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">*</span> <span class="n">life</span><span class="o">.</span><span class="n">q_r</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mf">2.5</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">16.4</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q3.7&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q3.7 16.4: 16.420207214428586 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 3.8:  (B) 1505</p>
<ul class="simple">
<li><p>compute portfolio means and variances from sum of 2000 independent members’ means and variances of survival.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sult</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">p1</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">p_x</span><span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
<span class="n">p2</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">p_x</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
<span class="n">mean</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">bernoulli</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span> <span class="o">+</span> <span class="n">sult</span><span class="o">.</span><span class="n">bernoulli</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span>
<span class="n">var</span> <span class="o">=</span> <span class="p">(</span><span class="n">sult</span><span class="o">.</span><span class="n">bernoulli</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">variance</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span> 
       <span class="o">+</span> <span class="n">sult</span><span class="o">.</span><span class="n">bernoulli</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">variance</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">pct</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">portfolio_percentile</span><span class="p">(</span><span class="n">mean</span><span class="o">=</span><span class="n">mean</span><span class="p">,</span> <span class="n">variance</span><span class="o">=</span><span class="n">var</span><span class="p">,</span> <span class="n">prob</span><span class="o">=</span><span class="mf">.95</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">1505</span><span class="p">,</span> <span class="n">pct</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q3.8&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q3.8 1505: 1504.8328375406456 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 3.9:  (E) 3850</p>
<ul class="simple">
<li><p>compute portfolio means and variances as sum of 4000 independent members’ means and variances (of survival)</p></li>
<li><p>retrieve normal percentile</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sult</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">p1</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">p_x</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
<span class="n">p2</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">p_x</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
<span class="n">mean</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">bernoulli</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2000</span> <span class="o">+</span> <span class="n">sult</span><span class="o">.</span><span class="n">bernoulli</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2000</span>
<span class="n">var</span> <span class="o">=</span> <span class="p">(</span><span class="n">sult</span><span class="o">.</span><span class="n">bernoulli</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">variance</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2000</span> 
       <span class="o">+</span> <span class="n">sult</span><span class="o">.</span><span class="n">bernoulli</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">variance</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2000</span><span class="p">)</span>
<span class="n">pct</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">portfolio_percentile</span><span class="p">(</span><span class="n">mean</span><span class="o">=</span><span class="n">mean</span><span class="p">,</span> <span class="n">variance</span><span class="o">=</span><span class="n">var</span><span class="p">,</span> <span class="n">prob</span><span class="o">=</span><span class="mf">.99</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">3850</span><span class="p">,</span> <span class="n">pct</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q3.9&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q3.9 3850: 3850.144345130047 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 3.10:  (C) 0.86</p>
<ul class="simple">
<li><p>reformulate the problem by reversing time: survival to year 6 is calculated in reverse as discounting by the same number of years.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">interest</span> <span class="o">=</span> <span class="n">Interest</span><span class="p">(</span><span class="n">v</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
<span class="n">L</span> <span class="o">=</span> <span class="mi">35</span><span class="o">*</span><span class="n">interest</span><span class="o">.</span><span class="n">annuity</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">due</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">+</span> <span class="mi">75</span><span class="o">*</span><span class="n">interest</span><span class="o">.</span><span class="n">v_t</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">interest</span> <span class="o">=</span> <span class="n">Interest</span><span class="p">(</span><span class="n">v</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">R</span> <span class="o">=</span> <span class="mi">15</span><span class="o">*</span><span class="n">interest</span><span class="o">.</span><span class="n">annuity</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">due</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">+</span> <span class="mi">25</span><span class="o">*</span><span class="n">interest</span><span class="o">.</span><span class="n">v_t</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.86</span><span class="p">,</span> <span class="n">L</span> <span class="o">/</span> <span class="p">(</span><span class="n">L</span> <span class="o">+</span> <span class="n">R</span><span class="p">),</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q3.10&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q3.10 0.86: 0.8578442833761983 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 3.11:  (B) 0.03</p>
<ul class="simple">
<li><p>calculate mortality rate by interpolating lives assuming UDD</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">LifeTable</span><span class="p">(</span><span class="n">udd</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">set_table</span><span class="p">(</span><span class="n">q</span><span class="o">=</span><span class="p">{</span><span class="mi">50</span><span class="o">//</span><span class="mi">2</span><span class="p">:</span> <span class="mf">.02</span><span class="p">,</span> <span class="mi">52</span><span class="o">//</span><span class="mi">2</span><span class="p">:</span> <span class="mf">.04</span><span class="p">})</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">q_r</span><span class="p">(</span><span class="mi">50</span><span class="o">//</span><span class="mi">2</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mf">2.5</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.03</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q3.11&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q3.11 0.03: 0.0298 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 3.12: (C) 0.055</p>
<ul class="simple">
<li><p>compute survival probability by interpolating lives assuming constant force</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SelectLife</span><span class="p">(</span><span class="n">udd</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">set_table</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="p">{</span><span class="mi">60</span><span class="p">:</span> <span class="p">[</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">9600</span><span class="p">,</span> <span class="mi">8640</span><span class="p">,</span> <span class="mi">7771</span><span class="p">],</span>
                                          <span class="mi">61</span><span class="p">:</span> <span class="p">[</span><span class="mi">8654</span><span class="p">,</span> <span class="mi">8135</span><span class="p">,</span> <span class="mi">6996</span><span class="p">,</span> <span class="mi">5737</span><span class="p">],</span>
                                          <span class="mi">62</span><span class="p">:</span> <span class="p">[</span><span class="mi">7119</span><span class="p">,</span> <span class="mi">6549</span><span class="p">,</span> <span class="mi">5501</span><span class="p">,</span> <span class="mi">4016</span><span class="p">],</span>
                                          <span class="mi">63</span><span class="p">:</span> <span class="p">[</span><span class="mi">5760</span><span class="p">,</span> <span class="mi">4954</span><span class="p">,</span> <span class="mi">3765</span><span class="p">,</span> <span class="mi">2410</span><span class="p">]})</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">q_r</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mf">3.5</span><span class="p">)</span> <span class="o">-</span> <span class="n">life</span><span class="o">.</span><span class="n">q_r</span><span class="p">(</span><span class="mi">61</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mf">3.5</span><span class="p">)</span>               
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.055</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q3.12&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q3.12 0.055: 0.05465655938591829 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 3.13:  (B) 1.6</p>
<ul class="simple">
<li><p>compute curtate expectations using recursion formulas</p></li>
<li><p>convert to complete expectation assuming UDD</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SelectLife</span><span class="p">()</span><span class="o">.</span><span class="n">set_table</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="p">{</span><span class="mi">55</span><span class="p">:</span> <span class="p">[</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">9493</span><span class="p">,</span> <span class="mi">8533</span><span class="p">,</span> <span class="mi">7664</span><span class="p">],</span>
                                 <span class="mi">56</span><span class="p">:</span> <span class="p">[</span><span class="mi">8547</span><span class="p">,</span> <span class="mi">8028</span><span class="p">,</span> <span class="mi">6889</span><span class="p">,</span> <span class="mi">5630</span><span class="p">],</span>
                                 <span class="mi">57</span><span class="p">:</span> <span class="p">[</span><span class="mi">7011</span><span class="p">,</span> <span class="mi">6443</span><span class="p">,</span> <span class="mi">5395</span><span class="p">,</span> <span class="mi">3904</span><span class="p">],</span>
                                 <span class="mi">58</span><span class="p">:</span> <span class="p">[</span><span class="mi">5853</span><span class="p">,</span> <span class="mi">4846</span><span class="p">,</span> <span class="mi">3548</span><span class="p">,</span> <span class="mi">2210</span><span class="p">]},</span>
                              <span class="n">e</span><span class="o">=</span><span class="p">{</span><span class="mi">57</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">1</span><span class="p">]})</span>
<span class="n">e</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">e_r</span><span class="p">(</span><span class="mi">58</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">1.6</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q3.13&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q3.13 1.6: 1.6003382187147688 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 3.14:  (C) 0.345</p>
<ul class="simple">
<li><p>compute mortality by interpolating lives between integer ages assuming UDD</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">LifeTable</span><span class="p">(</span><span class="n">udd</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">set_table</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="p">{</span><span class="mi">90</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">93</span><span class="p">:</span> <span class="mi">825</span><span class="p">},</span>
                                     <span class="n">d</span><span class="o">=</span><span class="p">{</span><span class="mi">97</span><span class="p">:</span> <span class="mi">72</span><span class="p">},</span>
                                     <span class="n">p</span><span class="o">=</span><span class="p">{</span><span class="mi">96</span><span class="p">:</span> <span class="mf">.2</span><span class="p">},</span>
                                     <span class="n">q</span><span class="o">=</span><span class="p">{</span><span class="mi">95</span><span class="p">:</span> <span class="mf">.4</span><span class="p">,</span> <span class="mi">97</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">q_r</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">93</span><span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mf">95.5</span> <span class="o">-</span> <span class="mi">93</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.345</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q3.14&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q3.14 0.345: 0.345 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
</section>
<section id="insurance-benefits">
<h2>4 Insurance benefits<a class="headerlink" href="#insurance-benefits" title="Permalink to this heading">#</a></h2>
<p>SOA Question 4.1:  (A) 0.27212</p>
<ul class="simple">
<li><p>solve EPV as sum of term and deferred insurance</p></li>
<li><p>compute variance as difference of second moment and first moment squared</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.03</span><span class="p">)</span>
<span class="n">life</span><span class="o">.</span><span class="n">set_A</span><span class="p">(</span><span class="mf">0.36987</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span><span class="o">.</span><span class="n">set_A</span><span class="p">(</span><span class="mf">0.62567</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="n">life</span><span class="o">.</span><span class="n">set_E</span><span class="p">(</span><span class="mf">0.51276</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">set_E</span><span class="p">(</span><span class="mf">0.17878</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">Z2</span> <span class="o">=</span> <span class="mf">0.24954</span>
<span class="n">A</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">life</span><span class="o">.</span><span class="n">term_insurance</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span> <span class="o">+</span> <span class="n">life</span><span class="o">.</span><span class="n">deferred_insurance</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">20</span><span class="p">))</span>
<span class="n">std</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">life</span><span class="o">.</span><span class="n">insurance_variance</span><span class="p">(</span><span class="n">A2</span><span class="o">=</span><span class="n">Z2</span><span class="p">,</span> <span class="n">A1</span><span class="o">=</span><span class="n">A</span><span class="p">))</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.27212</span><span class="p">,</span> <span class="n">std</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q4.1&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q4.1 0.27212: 0.2721117749374753 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 4.2:  (D) 0.18</p>
<ul class="simple">
<li><p>calculate Z(t) and deferred mortality for each half-yearly t</p></li>
<li><p>sum the deferred mortality probabilities for periods when PV &gt; 277000</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">LifeTable</span><span class="p">(</span><span class="n">udd</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">set_table</span><span class="p">(</span><span class="n">q</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mf">.16</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mf">.23</span><span class="p">})</span>\
                           <span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i_m</span><span class="o">=</span><span class="mf">.18</span><span class="p">,</span> <span class="n">m</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">mthly</span> <span class="o">=</span> <span class="n">Mthly</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">life</span><span class="o">=</span><span class="n">life</span><span class="p">)</span>
<span class="n">Z</span> <span class="o">=</span> <span class="n">mthly</span><span class="o">.</span><span class="n">Z_m</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">t</span><span class="p">:</span> <span class="mi">300000</span> <span class="o">+</span> <span class="n">t</span><span class="o">*</span><span class="mi">30000</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">Z</span><span class="p">[</span><span class="n">Z</span><span class="p">[</span><span class="s1">&#39;Z&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">277000</span><span class="p">][</span><span class="s1">&#39;q&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.18</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q4.2&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q4.2 0.18: 0.17941813045022975 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 4.3: (D) 0.878</p>
<ul class="simple">
<li><p>solve <span class="math notranslate nohighlight">\(q_{61}\)</span> from endowment insurance EPV formula</p></li>
<li><p>solve <span class="math notranslate nohighlight">\(A_{60:\overline{3|}}\)</span> with new <span class="math notranslate nohighlight">\(i=0.045\)</span> as EPV of endowment insurance benefits.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span><span class="o">.</span><span class="n">set_q</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">q</span><span class="p">):</span>   <span class="c1"># solve for q_61</span>
    <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">set_q</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">61</span><span class="p">)</span><span class="o">.</span><span class="n">endowment_insurance</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mf">0.86545</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.045</span><span class="p">)</span><span class="o">.</span><span class="n">endowment_insurance</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.878</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q4.3&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q4.3 0.878: 0.8777667236003878 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 4.4  (A) 0.036</p>
<ul class="simple">
<li><p>integrate to find EPV of <span class="math notranslate nohighlight">\(Z\)</span> and <span class="math notranslate nohighlight">\(Z^2\)</span></p></li>
<li><p>variance is difference of second moment and first moment squared</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">Insurance</span><span class="p">()</span><span class="o">.</span><span class="n">set_survival</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="k">lambda</span> <span class="o">*</span><span class="n">x</span><span class="p">:</span> <span class="mf">0.025</span><span class="p">,</span> <span class="n">maxage</span><span class="o">=</span><span class="n">x</span><span class="o">+</span><span class="mi">40</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">v_t</span><span class="o">=</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mf">.2</span><span class="o">*</span><span class="n">t</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">benefit</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">t</span><span class="p">):</span> <span class="k">return</span> <span class="mi">1</span> <span class="o">+</span> <span class="mf">.2</span> <span class="o">*</span> <span class="n">t</span>
<span class="n">A1</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">A_x</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="n">benefit</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">A2</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">A_x</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">moment</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="n">benefit</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">var</span> <span class="o">=</span> <span class="n">A2</span> <span class="o">-</span> <span class="n">A1</span><span class="o">**</span><span class="mi">2</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.036</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q4.4&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q4.4 0.036: 0.03567680106032681 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 4.5:  (C) 35200</p>
<ul class="simple">
<li><p>interpolate between integer ages with UDD, and find lifetime that mortality rate exceeded</p></li>
<li><p>compute PV of death benefit paid at that time.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sult</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">(</span><span class="n">udd</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">delta</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="n">Z</span> <span class="o">=</span> <span class="mi">100000</span> <span class="o">*</span> <span class="n">sult</span><span class="o">.</span><span class="n">Z_from_prob</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">35200</span><span class="p">,</span> <span class="n">Z</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q4.5&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q4.5 35200: 35187.952037196534 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 4.6:  (B) 29.85</p>
<ul class="simple">
<li><p>calculate adjusted mortality rates</p></li>
<li><p>compute term insurance as EPV of benefits</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sult</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">LifeTable</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_table</span><span class="p">(</span><span class="n">q</span><span class="o">=</span><span class="p">{</span><span class="mi">70</span><span class="o">+</span><span class="n">k</span><span class="p">:</span> <span class="mf">.95</span><span class="o">**</span><span class="n">k</span> <span class="o">*</span> <span class="n">sult</span><span class="o">.</span><span class="n">q_x</span><span class="p">(</span><span class="mi">70</span><span class="o">+</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)})</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">term_insurance</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">29.85</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q4.6&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q4.6 29.85: 29.84835110355902 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 4.7:  (B) 0.06</p>
<ul class="simple">
<li><p>use Bernoulli shortcut formula for variance of pure endowment Z</p></li>
<li><p>solve for <span class="math notranslate nohighlight">\(i\)</span>, since <span class="math notranslate nohighlight">\(p\)</span> is given.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
    <span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="p">)</span>\
                                   <span class="o">.</span><span class="n">set_p</span><span class="p">(</span><span class="mf">0.57</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
    <span class="k">return</span> <span class="mf">0.1</span><span class="o">*</span><span class="n">life</span><span class="o">.</span><span class="n">E_x</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span> <span class="o">-</span> <span class="n">life</span><span class="o">.</span><span class="n">E_x</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">moment</span><span class="o">=</span><span class="n">life</span><span class="o">.</span><span class="n">_VARIANCE</span><span class="p">)</span>
<span class="n">i</span> <span class="o">=</span> <span class="n">Recursion</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">[</span><span class="mf">0.058</span><span class="p">,</span> <span class="mf">0.066</span><span class="p">])</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.06</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q4.7&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q4.7 0.06: 0.06008023738770262 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 4.8  (C) 191</p>
<ul class="simple">
<li><p>use insurance recursion with special interest rate <span class="math notranslate nohighlight">\(i=0.04\)</span> in first year.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">v_t</span><span class="p">(</span><span class="n">t</span><span class="p">):</span> <span class="k">return</span> <span class="mf">1.04</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="n">t</span><span class="p">)</span> <span class="k">if</span> <span class="n">t</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="mf">1.04</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1.05</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="n">t</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">v_t</span><span class="o">=</span><span class="n">v_t</span><span class="p">)</span><span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">191</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q4.8&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q4.8 191: 191.1281281882354 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 4.9:  (D) 0.5</p>
<ul class="simple">
<li><p>use whole-life, term and endowment insurance relationships.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">E</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">()</span><span class="o">.</span><span class="n">set_A</span><span class="p">(</span><span class="mf">0.39</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">endowment</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>\
               <span class="o">.</span><span class="n">set_A</span><span class="p">(</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>\
               <span class="o">.</span><span class="n">E_x</span><span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">()</span><span class="o">.</span><span class="n">set_A</span><span class="p">(</span><span class="mf">0.32</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">35</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_E</span><span class="p">(</span><span class="n">E</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">A</span><span class="p">):</span> <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">set_A</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span><span class="o">.</span><span class="n">term_insurance</span><span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">[</span><span class="mf">0.35</span><span class="p">,</span> <span class="mf">0.55</span><span class="p">])</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q4.9&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> *Pure Endowment E_35(t=15) &lt;--
   E_35(t=15) = A_35(t=15,endow=1) - A_35(t=15)     ~endowment insurance minus term
----- Q4.9 0.5: 0.5 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 4.10:  (D)</p>
<ul class="simple">
<li><p>draw and compared benefit diagrams</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">Insurance</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span><span class="o">.</span><span class="n">set_survival</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">t</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">maxage</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
    <span class="k">if</span> <span class="mi">10</span> <span class="o">&lt;=</span> <span class="n">t</span> <span class="o">&lt;=</span> <span class="mi">20</span><span class="p">:</span> <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">interest</span><span class="o">.</span><span class="n">v_t</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="k">elif</span> <span class="mi">20</span> <span class="o">&lt;</span> <span class="n">t</span> <span class="o">&lt;=</span> <span class="mi">30</span><span class="p">:</span> <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">life</span><span class="o">.</span><span class="n">interest</span><span class="o">.</span><span class="n">v_t</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="mi">0</span>
<span class="k">def</span> <span class="nf">A</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>  <span class="c1"># Z_x+k (t-k)</span>
    <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">interest</span><span class="o">.</span><span class="n">v_t</span><span class="p">(</span><span class="n">t</span> <span class="o">-</span> <span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">t</span> <span class="o">&gt;</span> <span class="n">x</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">benefits</span><span class="o">=</span><span class="p">[</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">t</span><span class="p">:</span> <span class="p">(</span><span class="n">life</span><span class="o">.</span><span class="n">E_x</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="n">A</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
                            <span class="o">+</span> <span class="n">life</span><span class="o">.</span><span class="n">E_x</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span><span class="o">*</span> <span class="n">A</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">20</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> 
                            <span class="o">-</span> <span class="n">life</span><span class="o">.</span><span class="n">E_x</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span> <span class="o">*</span> <span class="n">A</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">30</span><span class="p">,</span> <span class="n">t</span><span class="p">)),</span>
          <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">t</span><span class="p">:</span> <span class="p">(</span><span class="n">A</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>  
                       <span class="o">+</span> <span class="n">life</span><span class="o">.</span><span class="n">E_x</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span> <span class="o">*</span> <span class="n">A</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">20</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> 
                       <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">life</span><span class="o">.</span><span class="n">E_x</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span> <span class="o">*</span> <span class="n">A</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">30</span><span class="p">,</span> <span class="n">t</span><span class="p">)),</span>
          <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">t</span><span class="p">:</span> <span class="p">(</span><span class="n">life</span><span class="o">.</span><span class="n">E_x</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="n">A</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> 
                       <span class="o">+</span> <span class="n">life</span><span class="o">.</span><span class="n">E_x</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span> <span class="o">*</span> <span class="n">A</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">20</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> 
                       <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">life</span><span class="o">.</span><span class="n">E_x</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span> <span class="o">*</span> <span class="n">A</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">30</span><span class="p">,</span> <span class="n">t</span><span class="p">)),</span>
          <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">t</span><span class="p">:</span> <span class="p">(</span><span class="n">life</span><span class="o">.</span><span class="n">E_x</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="n">A</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> 
                       <span class="o">+</span> <span class="n">life</span><span class="o">.</span><span class="n">E_x</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span> <span class="o">*</span> <span class="n">A</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">20</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> 
                       <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">life</span><span class="o">.</span><span class="n">E_x</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span> <span class="o">*</span> <span class="n">A</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">30</span><span class="p">,</span> <span class="n">t</span><span class="p">)),</span>
          <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">t</span><span class="p">:</span> <span class="p">(</span><span class="n">life</span><span class="o">.</span><span class="n">E_x</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
                       <span class="o">*</span> <span class="p">(</span><span class="n">A</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> 
                          <span class="o">+</span> <span class="n">life</span><span class="o">.</span><span class="n">E_x</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="n">A</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">20</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> 
                          <span class="o">-</span> <span class="n">life</span><span class="o">.</span><span class="n">E_x</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">20</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="n">A</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">30</span><span class="p">,</span> <span class="n">t</span><span class="p">)))]</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="n">fun</span><span class="p">]</span> <span class="o">+</span> <span class="n">benefits</span><span class="p">):</span>
    <span class="n">life</span><span class="o">.</span><span class="n">Z_plot</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="n">b</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;C</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s2">&quot;(&quot;</span> <span class="o">+</span> <span class="s2">&quot;abcde&quot;</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span> <span class="k">if</span> <span class="n">i</span> <span class="k">else</span> <span class="s2">&quot;Z&quot;</span><span class="p">])</span>
<span class="n">z</span> <span class="o">=</span> <span class="p">[</span><span class="nb">sum</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">b</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> <span class="o">-</span> <span class="n">fun</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="p">))</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">40</span><span class="p">))</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">benefits</span><span class="p">]</span>
<span class="n">ans</span> <span class="o">=</span> <span class="s2">&quot;ABCDE&quot;</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="n">z</span><span class="p">)]</span>
<span class="n">isclose</span><span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="n">ans</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q4.10&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q4.10 D: D [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
<img alt="_images/3fafdb587400ef89e5dc00e80ccf91c3d6ed5972953078f4959617778fb3a671.png" src="_images/3fafdb587400ef89e5dc00e80ccf91c3d6ed5972953078f4959617778fb3a671.png" />
</div>
</div>
<p>SOA Question 4.11:  (A) 143385</p>
<ul class="simple">
<li><p>compute endowment insurance = term insurance + pure endowment</p></li>
<li><p>apply formula of variance as the difference of second moment and first moment squared.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">A1</span> <span class="o">=</span> <span class="mi">528</span><span class="o">/</span><span class="mi">1000</span>   <span class="c1"># E[Z1]  term insurance</span>
<span class="n">C1</span> <span class="o">=</span> <span class="mf">0.209</span>      <span class="c1"># E[pure_endowment]</span>
<span class="n">C2</span> <span class="o">=</span> <span class="mf">0.136</span>      <span class="c1"># E[pure_endowment^2]</span>
<span class="n">B1</span> <span class="o">=</span> <span class="n">A1</span> <span class="o">+</span> <span class="n">C1</span>    <span class="c1"># endowment = term + pure_endowment</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">A2</span><span class="p">):</span>
    <span class="n">B2</span> <span class="o">=</span> <span class="n">A2</span> <span class="o">+</span> <span class="n">C2</span>   <span class="c1"># double force of interest</span>
    <span class="k">return</span> <span class="n">Insurance</span><span class="o">.</span><span class="n">insurance_variance</span><span class="p">(</span><span class="n">A2</span><span class="o">=</span><span class="n">B2</span><span class="p">,</span> <span class="n">A1</span><span class="o">=</span><span class="n">B1</span><span class="p">)</span>  
<span class="n">A2</span> <span class="o">=</span> <span class="n">Insurance</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">15000</span><span class="o">/</span><span class="p">(</span><span class="mi">1000</span><span class="o">*</span><span class="mi">1000</span><span class="p">),</span> <span class="n">grid</span><span class="o">=</span><span class="p">[</span><span class="mi">143400</span><span class="p">,</span> <span class="mi">279300</span><span class="p">])</span>
<span class="n">var</span> <span class="o">=</span> <span class="n">Insurance</span><span class="o">.</span><span class="n">insurance_variance</span><span class="p">(</span><span class="n">A2</span><span class="o">=</span><span class="n">A2</span><span class="p">,</span> <span class="n">A1</span><span class="o">=</span><span class="n">A1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">143385</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q4.11&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q4.11 143385: 143384.99999999997 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 4.12:  (C) 167</p>
<ul class="simple">
<li><p>since <span class="math notranslate nohighlight">\(Z_1,~Z_2\)</span> are non-overlapping, <span class="math notranslate nohighlight">\(E[Z_1~ Z_2] = 0\)</span> for computing <span class="math notranslate nohighlight">\(Cov(Z_1, Z_2)\)</span></p></li>
<li><p>whole life is sum of term and deferred, hence equals variance of components plus twice their covariance</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cov</span> <span class="o">=</span> <span class="n">Life</span><span class="o">.</span><span class="n">covariance</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mf">1.65</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mf">10.75</span><span class="p">,</span> <span class="n">ab</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># E[Z1 Z2] = 0 nonoverlapping</span>
<span class="n">var</span> <span class="o">=</span> <span class="n">Life</span><span class="o">.</span><span class="n">variance</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">var_a</span><span class="o">=</span><span class="mf">46.75</span><span class="p">,</span> <span class="n">var_b</span><span class="o">=</span><span class="mf">50.78</span><span class="p">,</span> <span class="n">cov_ab</span><span class="o">=</span><span class="n">cov</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">167</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q4.12&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q4.12 167: 166.82999999999998 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 4.13:  (C) 350</p>
<ul class="simple">
<li><p>compute term insurance as EPV of benefits</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SelectLife</span><span class="p">()</span><span class="o">.</span><span class="n">set_table</span><span class="p">(</span><span class="n">q</span><span class="o">=</span><span class="p">{</span><span class="mi">65</span><span class="p">:</span> <span class="p">[</span><span class="mf">.08</span><span class="p">,</span> <span class="mf">.10</span><span class="p">,</span> <span class="mf">.12</span><span class="p">,</span> <span class="mf">.14</span><span class="p">],</span>
                                 <span class="mi">66</span><span class="p">:</span> <span class="p">[</span><span class="mf">.09</span><span class="p">,</span> <span class="mf">.11</span><span class="p">,</span> <span class="mf">.13</span><span class="p">,</span> <span class="mf">.15</span><span class="p">],</span>
                                 <span class="mi">67</span><span class="p">:</span> <span class="p">[</span><span class="mf">.10</span><span class="p">,</span> <span class="mf">.12</span><span class="p">,</span> <span class="mf">.14</span><span class="p">,</span> <span class="mf">.16</span><span class="p">],</span>
                                 <span class="mi">68</span><span class="p">:</span> <span class="p">[</span><span class="mf">.11</span><span class="p">,</span> <span class="mf">.13</span><span class="p">,</span> <span class="mf">.15</span><span class="p">,</span> <span class="mf">.17</span><span class="p">],</span>
                                 <span class="mi">69</span><span class="p">:</span> <span class="p">[</span><span class="mf">.12</span><span class="p">,</span> <span class="mf">.14</span><span class="p">,</span> <span class="mf">.16</span><span class="p">,</span> <span class="mf">.18</span><span class="p">]})</span>\
                   <span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">.04</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">deferred_insurance</span><span class="p">(</span><span class="mi">65</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">350</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q4.13&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q4.13 350: 351.0578236056159 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 4.14:  (E) 390000</p>
<ul class="simple">
<li><p>discount (by interest rate <span class="math notranslate nohighlight">\(i=0.05\)</span>) the value at the portfolio percentile, of the sum of 400 bernoulli r.v. with survival probability <span class="math notranslate nohighlight">\(_{25}p_{60}\)</span></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sult</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">p_x</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">85</span><span class="o">-</span><span class="mi">60</span><span class="p">)</span>
<span class="n">mean</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">bernoulli</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="n">var</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">bernoulli</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">variance</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">F</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">portfolio_percentile</span><span class="p">(</span><span class="n">mean</span><span class="o">=</span><span class="n">mean</span><span class="p">,</span> <span class="n">variance</span><span class="o">=</span><span class="n">var</span><span class="p">,</span> <span class="n">prob</span><span class="o">=</span><span class="mf">.86</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
<span class="n">F</span> <span class="o">*=</span> <span class="mi">5000</span> <span class="o">*</span> <span class="n">sult</span><span class="o">.</span><span class="n">interest</span><span class="o">.</span><span class="n">v_t</span><span class="p">(</span><span class="mi">85</span><span class="o">-</span><span class="mi">60</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">390000</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q4.14&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q4.14 390000: 389322.86778416135 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 4.15  (E) 0.0833</p>
<ul class="simple">
<li><p>this special benefit function has effect of reducing actuarial discount rate to use in constant force of mortality shortcut formulas</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">Insurance</span><span class="p">()</span><span class="o">.</span><span class="n">set_survival</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="k">lambda</span> <span class="o">*</span><span class="n">x</span><span class="p">:</span> <span class="mf">0.04</span><span class="p">)</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">delta</span><span class="o">=</span><span class="mf">0.06</span><span class="p">)</span>
<span class="n">benefit</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">t</span><span class="p">:</span> <span class="n">math</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="mf">0.02</span><span class="o">*</span><span class="n">t</span><span class="p">)</span>
<span class="n">A1</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">A_x</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="n">benefit</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">A2</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">A_x</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">moment</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="n">benefit</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">var</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">insurance_variance</span><span class="p">(</span><span class="n">A2</span><span class="o">=</span><span class="n">A2</span><span class="p">,</span> <span class="n">A1</span><span class="o">=</span><span class="n">A1</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.0833</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q4.15&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q4.15 0.0833: 0.08334849338238598 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 4.16:  (D) 0.11</p>
<ul class="simple">
<li><p>compute EPV of future benefits with adjusted mortality rates</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">q</span> <span class="o">=</span> <span class="p">[</span><span class="mf">.045</span><span class="p">,</span> <span class="mf">.050</span><span class="p">,</span> <span class="mf">.055</span><span class="p">,</span> <span class="mf">.060</span><span class="p">]</span>
<span class="n">q</span> <span class="o">=</span> <span class="p">{</span><span class="mi">50</span> <span class="o">+</span> <span class="n">x</span><span class="p">:</span> <span class="p">[</span><span class="n">q</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">*</span> <span class="mf">0.7</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">q</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> 
              <span class="n">q</span><span class="p">[</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mf">0.8</span> <span class="k">if</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">q</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> 
              <span class="n">q</span><span class="p">[</span><span class="n">x</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="k">if</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">q</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span><span class="p">]</span> 
     <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)}</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">SelectLife</span><span class="p">()</span><span class="o">.</span><span class="n">set_table</span><span class="p">(</span><span class="n">q</span><span class="o">=</span><span class="n">q</span><span class="p">)</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">.04</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">term_insurance</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.1116</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q4.16&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q4.16 0.1116: 0.1115661982248521 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 4.17:  (A) 1126.7</p>
<ul class="simple">
<li><p>find future lifetime with 50% survival probability</p></li>
<li><p>compute EPV of special whole life as sum of term and deferred insurance, that have different benefit amounts before and after median lifetime.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sult</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">median</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">Z_t</span><span class="p">(</span><span class="mi">48</span><span class="p">,</span> <span class="n">prob</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">benefit</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">t</span><span class="p">):</span> <span class="k">return</span> <span class="mi">5000</span> <span class="k">if</span> <span class="n">t</span> <span class="o">&lt;</span> <span class="n">median</span> <span class="k">else</span> <span class="mi">10000</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">A_x</span><span class="p">(</span><span class="mi">48</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="n">benefit</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">1130</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q4.17&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q4.17 1130: 1126.774772894844 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 4.18  (A) 81873</p>
<ul class="simple">
<li><p>find values of limits such that integral of lifetime density function equals required survival probability</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">t</span><span class="p">):</span> <span class="k">return</span> <span class="mf">0.1</span> <span class="k">if</span> <span class="n">t</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="k">else</span> <span class="mf">0.4</span><span class="o">*</span><span class="n">t</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">Insurance</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">delta</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_survival</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="n">f</span><span class="p">,</span> <span class="n">maxage</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">benefit</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">t</span><span class="p">):</span> <span class="k">return</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">t</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="k">else</span> <span class="mi">100000</span>
<span class="n">prob</span> <span class="o">=</span> <span class="mf">0.9</span> <span class="o">-</span> <span class="n">life</span><span class="o">.</span><span class="n">q_x</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">T</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">Z_t</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">prob</span><span class="o">=</span><span class="n">prob</span><span class="p">)</span>
<span class="n">Z</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">Z_from_t</span><span class="p">(</span><span class="n">T</span><span class="p">)</span> <span class="o">*</span> <span class="n">benefit</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">T</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">81873</span><span class="p">,</span> <span class="n">Z</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q4.18&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q4.18 81873: 81873.07530779815 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 4.19:  (B) 59050</p>
<ul class="simple">
<li><p>calculate adjusted mortality for the one-year select period</p></li>
<li><p>compute whole life insurance using backward recursion formula</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">ExtraRisk</span><span class="p">(</span><span class="n">life</span><span class="o">=</span><span class="n">life</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">risk</span><span class="o">=</span><span class="s2">&quot;MULTIPLY_RATE&quot;</span><span class="p">)[</span><span class="s1">&#39;q&#39;</span><span class="p">]</span>
<span class="n">select</span> <span class="o">=</span> <span class="n">SelectLife</span><span class="p">(</span><span class="n">periods</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">set_select</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">age_selected</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">q</span><span class="o">=</span><span class="n">q</span><span class="p">)</span>\
                              <span class="o">.</span><span class="n">set_select</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">age_selected</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">q</span><span class="o">=</span><span class="n">life</span><span class="p">[</span><span class="s1">&#39;q&#39;</span><span class="p">])</span>\
                              <span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">.05</span><span class="p">)</span>\
                              <span class="o">.</span><span class="n">fill_table</span><span class="p">()</span>
<span class="n">A</span> <span class="o">=</span> <span class="mi">100000</span> <span class="o">*</span> <span class="n">select</span><span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">59050</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q4.19&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q4.19 59050: 59050.59973285648 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
</section>
<section id="annuities">
<h2>5 Annuities<a class="headerlink" href="#annuities" title="Permalink to this heading">#</a></h2>
<p>SOA Question 5.1: (A) 0.705</p>
<ul class="simple">
<li><p>sum of annuity certain and deferred life annuity with constant force of mortality shortcut</p></li>
<li><p>use equation for PV annuity r.v. Y to infer lifetime</p></li>
<li><p>compute survival probability from constant force of mortality function.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">ConstantForce</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">delta</span><span class="o">=</span><span class="mf">0.06</span><span class="p">)</span>
<span class="n">EY</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">certain_life_annuity</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">p_x</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">life</span><span class="o">.</span><span class="n">Y_to_t</span><span class="p">(</span><span class="n">EY</span><span class="p">))</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.705</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q5.1&quot;</span><span class="p">)</span>  <span class="c1"># 0.705</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q5.1 0.705: 0.7053680433746505 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 5.2:  (B) 9.64</p>
<ul class="simple">
<li><p>compute term life as difference of whole life and deferred insurance</p></li>
<li><p>compute twin annuity-due, and adjust to an immediate annuity.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>\
               <span class="o">.</span><span class="n">set_A</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>\
               <span class="o">.</span><span class="n">set_A</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">x</span><span class="o">+</span><span class="n">n</span><span class="p">)</span>\
               <span class="o">.</span><span class="n">set_E</span><span class="p">(</span><span class="mf">0.35</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>\
               <span class="o">.</span><span class="n">immediate_annuity</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">9.64</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q5.2&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> *Whole Life Annuity a_0(t=WL) &lt;--
   a_x = (1-A_x) / d                                           ~insurance twin
      a_0(t=1) = 1                                  ~one-year discrete annuity
      a_1(t=1) = 1                                  ~one-year discrete annuity
 *Whole Life Annuity a_10(t=WL) &lt;--
   a_x = (1-A_x) / d                                           ~insurance twin
      a_10(t=1) = 1                                 ~one-year discrete annuity
      a_11(t=1) = 1                                 ~one-year discrete annuity
----- Q5.2 9.64: 9.639999999999999 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 5.3:  (C) 6.239</p>
<ul class="simple">
<li><p>Differential reduces to the the EPV of the benefit payment at the upper time limit.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="mf">10.5</span>
<span class="n">E</span> <span class="o">=</span> <span class="n">t</span> <span class="o">*</span> <span class="n">SULT</span><span class="p">()</span><span class="o">.</span><span class="n">E_r</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">t</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">6.239</span><span class="p">,</span> <span class="n">E</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q5.3&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q5.3 6.239: 6.23871918627528 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 5.4:  (A) 213.7</p>
<ul class="simple">
<li><p>compute certain and life annuity factor as the sum of a certain annuity and a deferred life annuity.</p></li>
<li><p>solve for amount of annual benefit that equals given EPV</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">ConstantForce</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="mf">0.02</span><span class="p">)</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">delta</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>
<span class="n">u</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">e_x</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">curtate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="mi">10000</span> <span class="o">/</span> <span class="n">life</span><span class="o">.</span><span class="n">certain_life_annuity</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="n">u</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">213.7</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q5.4&quot;</span><span class="p">)</span> <span class="c1"># 213.7</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q5.4 213.7: 213.74552118275955 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 5.5: (A) 1699.6</p>
<ul class="simple">
<li><p>adjust mortality rate for the extra risk</p></li>
<li><p>compute annuity by backward recursion.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>   <span class="c1"># start with SULT life table</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">ExtraRisk</span><span class="p">(</span><span class="n">life</span><span class="o">=</span><span class="n">life</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">risk</span><span class="o">=</span><span class="s2">&quot;ADD_FORCE&quot;</span><span class="p">)[</span><span class="s1">&#39;q&#39;</span><span class="p">]</span>
<span class="n">select</span> <span class="o">=</span> <span class="n">SelectLife</span><span class="p">(</span><span class="n">periods</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">set_select</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">age_selected</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">q</span><span class="o">=</span><span class="n">q</span><span class="p">)</span>\
                              <span class="o">.</span><span class="n">set_select</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">age_selected</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">life</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">])</span>\
                              <span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>\
                              <span class="o">.</span><span class="n">fill_table</span><span class="p">()</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">select</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">][</span><span class="mi">45</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">1700</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q5.5&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q5.5 1700: 1699.6076593190103 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 5.6:  (D) 1200</p>
<ul class="simple">
<li><p>compute mean and variance of EPV of whole life annuity from whole life insurance twin and variance identities.</p></li>
<li><p>portfolio percentile of the sum of <span class="math notranslate nohighlight">\(N=100\)</span> life annuity payments</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">Annuity</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="n">var</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">annuity_variance</span><span class="p">(</span><span class="n">A2</span><span class="o">=</span><span class="mf">0.22</span><span class="p">,</span> <span class="n">A1</span><span class="o">=</span><span class="mf">0.45</span><span class="p">)</span>
<span class="n">mean</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">annuity_twin</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="mf">0.45</span><span class="p">)</span>
<span class="n">fund</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">portfolio_percentile</span><span class="p">(</span><span class="n">mean</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">prob</span><span class="o">=</span><span class="mf">.95</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">1200</span><span class="p">,</span> <span class="n">fund</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q5.6&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q5.6 1200: 1200.6946732201702 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 5.7:  (C)</p>
<ul class="simple">
<li><p>compute endowment insurance from relationships of whole life, temporary and deferred insurances.</p></li>
<li><p>compute temporary annuity from insurance twin</p></li>
<li><p>apply Woolhouse approximation</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.04</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_A</span><span class="p">(</span><span class="mf">0.188</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">35</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_A</span><span class="p">(</span><span class="mf">0.498</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">65</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_p</span><span class="p">(</span><span class="mf">0.883</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">mthly</span> <span class="o">=</span> <span class="n">Woolhouse</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">life</span><span class="o">=</span><span class="n">life</span><span class="p">,</span> <span class="n">three_term</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">*</span> <span class="n">mthly</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">17376.7</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q5.7&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> *Whole Life Annuity a_35(t=WL) &lt;--
   a_x = (1-A_x) / d                                           ~insurance twin
      a_35(t=1) = 1                                 ~one-year discrete annuity
      a_36(t=1) = 1                                 ~one-year discrete annuity
 *Whole Life Annuity a_65(t=WL) &lt;--
   a_x = (1-A_x) / d                                           ~insurance twin
      a_65(t=1) = 1                                 ~one-year discrete annuity
      a_66(t=1) = 1                                 ~one-year discrete annuity
 *Pure Endowment E_35(t=30) &lt;--
   E_35(t=30) = p_35(t=30) * v(t=30)                           ~pure endowment
----- Q5.7 17376.7: 17376.71459632958 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 5.8: (C) 0.92118</p>
<ul class="simple">
<li><p>calculate EPV of certain and life annuity.</p></li>
<li><p>find survival probability of lifetime s.t. sum of annual payments exceeds EPV</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sult</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">certain_life_annuity</span><span class="p">(</span><span class="mi">55</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">p_x</span><span class="p">(</span><span class="mi">55</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.92118</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q5.8&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q5.8 0.92118: 0.9211799771029529 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 5.9:  (C) 0.015</p>
<ul class="simple">
<li><p>express both EPV’s expressed as forward recursions</p></li>
<li><p>solve for unknown constant <span class="math notranslate nohighlight">\(k\)</span>.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">,</span> <span class="n">p</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.9</span>  <span class="c1"># set arbitrary p_x = 0.9</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">()</span><span class="o">.</span><span class="n">set_a</span><span class="p">(</span><span class="mf">21.854</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>\
               <span class="o">.</span><span class="n">set_p</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>\
               <span class="o">.</span><span class="n">whole_life_annuity</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">set_a</span><span class="p">(</span><span class="mf">22.167</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">k</span><span class="p">):</span> <span class="k">return</span> <span class="n">a</span> <span class="o">-</span> <span class="n">life</span><span class="o">.</span><span class="n">set_p</span><span class="p">((</span><span class="mi">1</span> <span class="o">+</span> <span class="n">k</span><span class="p">)</span> <span class="o">*</span> <span class="n">p</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">whole_life_annuity</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">k</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">[</span><span class="mf">0.005</span><span class="p">,</span> <span class="mf">0.025</span><span class="p">])</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.015</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q5.9&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> *Whole Life Annuity a_1(t=WL) &lt;--
      a_2(t=1) = 1                                  ~one-year discrete annuity
     a_1(t=WL) = [ a_0(t=WL) - 1 ] / E_0(t=1)               ~forward recursion
      E_0(t=1) = p_0 * v(t=1)                                  ~pure endowment
----- Q5.9 0.015: 0.015009110961925157 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
</section>
<section id="premium-calculation">
<h2>6 Premium Calculation<a class="headerlink" href="#premium-calculation" title="Permalink to this heading">#</a></h2>
<p>SOA Question 6.1: (D) 35.36</p>
<ul class="simple">
<li><p>calculate IA factor for return of premiums without interest</p></li>
<li><p>solve net premium such that EPV benefits = EPV premium</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">P</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.03</span><span class="p">)</span>\
          <span class="o">.</span><span class="n">net_premium</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">return_premium</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">35.36</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.1&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.1 35.36: 35.35922286190033 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.2: (E) 3604</p>
<ul class="simple">
<li><p>EPV return of premiums without interest = Premium <span class="math notranslate nohighlight">\(\times\)</span> IA factor</p></li>
<li><p>solve for gross premiums such that EPV premiums = EPV benefits and expenses</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">Premiums</span><span class="p">()</span>
<span class="n">A</span><span class="p">,</span> <span class="n">IA</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="mf">0.17094</span><span class="p">,</span> <span class="mf">0.96728</span><span class="p">,</span> <span class="mf">6.8865</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">IA</span><span class="o">=</span><span class="n">IA</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">100000</span><span class="p">,</span>
                       <span class="n">initial_premium</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">renewal_premium</span><span class="o">=</span><span class="mf">.05</span><span class="p">,</span>
                       <span class="n">renewal_policy</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">initial_policy</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">3604</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.2&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.2 3604: 3604.229940320728 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.3:  (C) 0.390</p>
<ul class="simple">
<li><p>solve lifetime <span class="math notranslate nohighlight">\(t\)</span> such that PV annuity certain = PV whole life annuity at age 65</p></li>
<li><p>calculate mortality rate through the year before curtate lifetime</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">Y_to_t</span><span class="p">(</span><span class="n">life</span><span class="o">.</span><span class="n">whole_life_annuity</span><span class="p">(</span><span class="mi">65</span><span class="p">))</span>
<span class="n">q</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">life</span><span class="o">.</span><span class="n">p_x</span><span class="p">(</span><span class="mi">65</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.39</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.3&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.3 0.39: 0.39039071872030084 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.4:  (E) 1890</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mthly</span> <span class="o">=</span> <span class="n">Mthly</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">life</span><span class="o">=</span><span class="n">Annuity</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.06</span><span class="p">))</span>
<span class="n">A1</span><span class="p">,</span> <span class="n">A2</span> <span class="o">=</span> <span class="mf">0.4075</span><span class="p">,</span> <span class="mf">0.2105</span>
<span class="n">mean</span> <span class="o">=</span> <span class="n">mthly</span><span class="o">.</span><span class="n">annuity_twin</span><span class="p">(</span><span class="n">A1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">15</span> <span class="o">*</span> <span class="mi">12</span>
<span class="n">var</span> <span class="o">=</span> <span class="n">mthly</span><span class="o">.</span><span class="n">annuity_variance</span><span class="p">(</span><span class="n">A1</span><span class="o">=</span><span class="n">A1</span><span class="p">,</span> <span class="n">A2</span><span class="o">=</span><span class="n">A2</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">15</span> <span class="o">*</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">S</span> <span class="o">=</span> <span class="n">Annuity</span><span class="o">.</span><span class="n">portfolio_percentile</span><span class="p">(</span><span class="n">mean</span><span class="o">=</span><span class="n">mean</span><span class="p">,</span> <span class="n">variance</span><span class="o">=</span><span class="n">var</span><span class="p">,</span> <span class="n">prob</span><span class="o">=</span><span class="mf">.9</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span> <span class="o">/</span> <span class="mi">200</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">1890</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.4&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.4 1890: 1893.912859650868 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.5:  (D) 33</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">net_premium</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">gain</span><span class="p">(</span><span class="n">k</span><span class="p">):</span> <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">Y_x</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">k</span><span class="p">)</span> <span class="o">*</span> <span class="n">P</span> <span class="o">-</span> <span class="n">life</span><span class="o">.</span><span class="n">Z_x</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">k</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span>
<span class="n">k</span> <span class="o">=</span> <span class="nb">min</span><span class="p">([</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span> <span class="k">if</span> <span class="n">gain</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">33</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.5&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.5 33: 33 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.6:  (B) 0.79</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">net_premium</span><span class="p">(</span><span class="mi">62</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">premium</span><span class="o">=</span><span class="mf">1.03</span><span class="o">*</span><span class="n">P</span><span class="p">,</span>
                    <span class="n">renewal_policy</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                    <span class="n">initial_policy</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                    <span class="n">initial_premium</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span>
                    <span class="n">benefit</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>
<span class="n">L</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_policy_value</span><span class="p">(</span><span class="mi">62</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">)</span>
<span class="n">var</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_policy_variance</span><span class="p">(</span><span class="mi">62</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">)</span>
<span class="n">prob</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">portfolio_cdf</span><span class="p">(</span><span class="n">mean</span><span class="o">=</span><span class="n">L</span><span class="p">,</span> <span class="n">variance</span><span class="o">=</span><span class="n">var</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">40000</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">.79</span><span class="p">,</span> <span class="n">prob</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.6&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.6 0.79: 0.7914321142683509 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.7:  (C) 2880</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span> 
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">E_x</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">IA</span> <span class="o">=</span> <span class="n">a</span> <span class="o">-</span> <span class="n">life</span><span class="o">.</span><span class="n">interest</span><span class="o">.</span><span class="n">annuity</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span> <span class="o">*</span> <span class="n">life</span><span class="o">.</span><span class="n">p_x</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">IA</span><span class="o">=</span><span class="n">IA</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">2880</span><span class="p">,</span> <span class="n">G</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.7&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.7 2880: 2880.2463991134578 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.8:  (B) 9.5</p>
<ul class="simple">
<li><p>calculate EPV of expenses as deferred life annuities</p></li>
<li><p>solve for level premium</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">initial_cost</span> <span class="o">=</span> <span class="p">(</span><span class="mi">50</span> <span class="o">+</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">life</span><span class="o">.</span><span class="n">deferred_annuity</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span>
                <span class="o">+</span> <span class="mi">5</span> <span class="o">*</span> <span class="n">life</span><span class="o">.</span><span class="n">deferred_annuity</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">))</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">net_premium</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="n">initial_cost</span><span class="o">=</span><span class="n">initial_cost</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">9.5</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.8&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.8 9.5: 9.526003201821927 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.9:  (D) 647</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">term_insurance</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">initial_cost</span> <span class="o">=</span> <span class="mi">25</span> <span class="o">*</span> <span class="n">life</span><span class="o">.</span><span class="n">deferred_annuity</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">100000</span><span class="p">,</span>
                       <span class="n">initial_premium</span><span class="o">=</span><span class="mf">0.42</span><span class="p">,</span> <span class="n">renewal_premium</span><span class="o">=</span><span class="mf">0.12</span><span class="p">,</span>
                       <span class="n">initial_policy</span><span class="o">=</span><span class="mi">75</span> <span class="o">+</span> <span class="n">initial_cost</span><span class="p">,</span> <span class="n">renewal_policy</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">647</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.9&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.9 647: 646.8608151974504 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.10:  (D) 0.91</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.06</span><span class="p">)</span><span class="o">.</span><span class="n">set_p</span><span class="p">(</span><span class="mf">0.975</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="mf">152.85</span><span class="o">/</span><span class="mf">56.05</span>
<span class="n">life</span><span class="o">.</span><span class="n">set_a</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">p1</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">p_x</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>                                                  
<span class="n">life</span><span class="o">.</span><span class="n">set_p</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">p</span><span class="p">):</span> 
    <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">set_p</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">term_insurance</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mf">152.85</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="mf">0.975</span><span class="p">)</span>  <span class="c1"># finally solve p_x+3, given A_x:3</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.91</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.10&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.10 0.91: 0.9097382950525701 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.11:  (C) 0.041</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.04</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">set_A</span><span class="p">(</span><span class="mf">0.39788</span><span class="p">,</span> <span class="mi">51</span><span class="p">)</span>\
        <span class="o">.</span><span class="n">set_q</span><span class="p">(</span><span class="mf">0.0048</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>\
        <span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">life</span><span class="o">.</span><span class="n">annuity_twin</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">))</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">set_q</span><span class="p">(</span><span class="mf">0.048</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span><span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
<span class="n">loss</span> <span class="o">=</span> <span class="n">A</span> <span class="o">-</span> <span class="n">life</span><span class="o">.</span><span class="n">annuity_twin</span><span class="p">(</span><span class="n">A</span><span class="p">)</span> <span class="o">*</span> <span class="n">P</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.041</span><span class="p">,</span> <span class="n">loss</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.11&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> *Whole Life Insurance A_50(t=WL) &lt;--
   A_50(t=WL) = v * [ q_50 * b + p_50 * A_51(t=WL) ]       ~backward recursion
    p_50 = 1 - q_50                                   ~complement of mortality
 *Whole Life Insurance A_50(t=WL) &lt;--
   A_50(t=WL) = v * [ q_50 * b + p_50 * A_51(t=WL) ]       ~backward recursion
    p_50 = 1 - q_50                                   ~complement of mortality
----- Q6.11 0.041: 0.04069206883563675 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.12:  (E) 88900</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">PolicyValues</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.06</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">12</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">insurance_twin</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">benefit</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">settlement_policy</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
                        <span class="n">initial_policy</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">initial_premium</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> 
                        <span class="n">renewal_policy</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">renewal_premium</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">contract</span><span class="o">.</span><span class="n">premium</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="o">**</span><span class="n">contract</span><span class="o">.</span><span class="n">premium_terms</span><span class="p">)</span>
<span class="n">L</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_variance_loss</span><span class="p">(</span><span class="n">A1</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">A2</span><span class="o">=</span><span class="mf">0.14</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">88900</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.12&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.12 88900: 88862.59592874818 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.13:  (D) -400</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="mi">45</span><span class="p">)</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">benefit</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="n">initial_premium</span><span class="o">=</span><span class="mf">.8</span><span class="p">,</span> <span class="n">renewal_premium</span><span class="o">=</span><span class="mf">.1</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">P</span><span class="p">):</span>   <span class="c1"># Solve for premium, given Loss(t=0) = 4953</span>
    <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">L_from_t</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="mf">10.5</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="o">.</span><span class="n">set_contract</span><span class="p">(</span><span class="n">premium</span><span class="o">=</span><span class="n">P</span><span class="p">))</span>
<span class="n">contract</span><span class="o">.</span><span class="n">set_contract</span><span class="p">(</span><span class="n">premium</span><span class="o">=</span><span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">4953</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="mi">100</span><span class="p">))</span>
<span class="n">L</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_policy_value</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">)</span>
<span class="n">life</span><span class="o">.</span><span class="n">L_plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">T</span><span class="o">=</span><span class="mf">10.5</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="o">-</span><span class="mi">400</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.13&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.13 -400: -400.94447599879277 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
<img alt="_images/764bb64b07d2dfec6f9d3f340589e806f84e156130e4b4d04752b29fdcd64b07.png" src="_images/764bb64b07d2dfec6f9d3f340589e806f84e156130e4b4d04752b29fdcd64b07.png" />
</div>
</div>
<p>SOA Question 6.14  (D) 1150</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.5</span><span class="o">*</span><span class="n">life</span><span class="o">.</span><span class="n">deferred_annuity</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">1150</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.14&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.14 1150: 1148.5800555155263 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.15:  (B) 1.002</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span><span class="o">.</span><span class="n">set_a</span><span class="p">(</span><span class="mf">3.4611</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">insurance_twin</span><span class="p">(</span><span class="mf">3.4611</span><span class="p">)</span>
<span class="n">udd</span> <span class="o">=</span> <span class="n">UDD</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">life</span><span class="o">=</span><span class="n">life</span><span class="p">)</span>
<span class="n">a1</span> <span class="o">=</span> <span class="n">udd</span><span class="o">.</span><span class="n">whole_life_annuity</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>
<span class="n">woolhouse</span> <span class="o">=</span> <span class="n">Woolhouse</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">life</span><span class="o">=</span><span class="n">life</span><span class="p">)</span>
<span class="n">a2</span> <span class="o">=</span> <span class="n">woolhouse</span><span class="o">.</span><span class="n">whole_life_annuity</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">a1</span><span class="p">,</span> <span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">)</span><span class="o">/</span><span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">a2</span><span class="p">,</span> <span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">1.002</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.15&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.15 1.002: 1.0022973504113772 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.16: (A) 2408.6</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">Premiums</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">insurance_equivalence</span><span class="p">(</span><span class="n">premium</span><span class="o">=</span><span class="mi">2143</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">annuity_equivalence</span><span class="p">(</span><span class="n">premium</span><span class="o">=</span><span class="mi">2143</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">100000</span><span class="p">,</span> <span class="n">settlement_policy</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                       <span class="n">initial_policy</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">initial_premium</span><span class="o">=</span><span class="mf">0.04</span> <span class="o">+</span> <span class="mf">0.35</span><span class="p">,</span>
                       <span class="n">renewal_policy</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">renewal_premium</span><span class="o">=</span><span class="mf">0.04</span> <span class="o">+</span> <span class="mf">0.02</span><span class="p">)</span> 
<span class="n">isclose</span><span class="p">(</span><span class="mi">2410</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.16&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.16 2410: 2408.575206281868 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.17:  (A) -30000</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">ConstantForce</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.08</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">endowment_insurance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">100000</span><span class="p">,</span> <span class="n">endowment</span><span class="o">=</span><span class="mi">30000</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">)</span>
<span class="n">life1</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.08</span><span class="p">)</span>\
                   <span class="o">.</span><span class="n">set_q</span><span class="p">(</span><span class="n">life</span><span class="o">.</span><span class="n">q_x</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1.5</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>\
                   <span class="o">.</span><span class="n">set_q</span><span class="p">(</span><span class="n">life</span><span class="o">.</span><span class="n">q_x</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1.5</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">premium</span><span class="o">=</span><span class="n">P</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">100000</span><span class="p">,</span> <span class="n">endowment</span><span class="o">=</span><span class="mi">30000</span><span class="p">)</span>
<span class="n">L</span> <span class="o">=</span> <span class="n">life1</span><span class="o">.</span><span class="n">gross_policy_value</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="o">-</span><span class="mi">30000</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.17&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> *Term Insurance A_0(t=2) &lt;--
   A_0(t=2) = v * [ q_0 * b + p_0 * A_1(t=1) ]             ~backward recursion
    p_0 = 1 - q_0                                     ~complement of mortality
    A_1(t=1) = A_1(t=1,endow=1) - E_1(t=1)         ~endowment insurance - pure
     E_1(t=1) = p_1 * v(t=1)                                   ~pure endowment
    p_1 = 1 - q_1                                     ~complement of mortality
 *Temporary Annuity a_0(t=2) &lt;--
   a_0(t=2) = 1 + E_0(t=1) * a_1(t=1)                      ~backward recursion
    E_0(t=1) = p_0 * v(t=1)                                    ~pure endowment
     p_0 = 1 - q_0                                    ~complement of mortality
    a_1(t=1) = 1                                    ~one-year discrete annuity
 *Pure Endowment E_0(t=2) &lt;--
   E_0(t=2) = p_0(t=2) * v(t=2)                                ~pure endowment
    p_0(t=2) = p_1 * p_0                                  ~survival chain rule
      p_0 = 1 - q_0                                   ~complement of mortality
      p_1 = 1 - q_1                                   ~complement of mortality
----- Q6.17 -30000: -30107.42633581125 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.18:  (D) 166400</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">P</span><span class="p">):</span>
    <span class="n">A</span> <span class="o">=</span> <span class="p">(</span><span class="n">life</span><span class="o">.</span><span class="n">term_insurance</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">P</span><span class="p">)</span>
         <span class="o">+</span> <span class="n">life</span><span class="o">.</span><span class="n">deferred_annuity</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">30000</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">)</span> <span class="o">-</span> <span class="n">P</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">[</span><span class="mi">162000</span><span class="p">,</span> <span class="mi">168800</span><span class="p">])</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">166400</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.18&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.18 166400: 166362.83871487685 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.19:  (B) 0.033</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">initial_policy</span><span class="o">=</span><span class="mf">.2</span><span class="p">,</span> <span class="n">renewal_policy</span><span class="o">=</span><span class="mf">.01</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">whole_life_annuity</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
<span class="n">contract</span><span class="o">.</span><span class="n">premium</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="o">**</span><span class="n">contract</span><span class="o">.</span><span class="n">premium_terms</span><span class="p">)</span>
<span class="n">L</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_policy_variance</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.033</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.19&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.19 0.033: 0.03283273381910885 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.20:  (B) 459</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">LifeTable</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">.04</span><span class="p">)</span><span class="o">.</span><span class="n">set_table</span><span class="p">(</span><span class="n">p</span><span class="o">=</span><span class="p">{</span><span class="mi">75</span><span class="p">:</span> <span class="mf">.9</span><span class="p">,</span> <span class="mi">76</span><span class="p">:</span> <span class="mf">.88</span><span class="p">,</span> <span class="mi">77</span><span class="p">:</span> <span class="mf">.85</span><span class="p">})</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">IA</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">increasing_insurance</span><span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">deferred_insurance</span><span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">P</span><span class="p">):</span> <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">A</span><span class="o">=</span><span class="n">P</span><span class="o">*</span><span class="n">IA</span> <span class="o">+</span> <span class="n">A</span><span class="o">*</span><span class="mi">10000</span><span class="p">)</span> <span class="o">-</span> <span class="n">P</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">[</span><span class="mi">449</span><span class="p">,</span> <span class="mi">489</span><span class="p">])</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">459</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.20&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.20 459: 458.83181728297353 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.21:  (C) 100</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="mf">0.04</span><span class="p">)</span>
<span class="n">life</span><span class="o">.</span><span class="n">set_A</span><span class="p">(</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">75</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">endowment</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">life</span><span class="o">.</span><span class="n">set_E</span><span class="p">(</span><span class="mf">0.11</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">75</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">P</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">P</span> <span class="o">*</span> <span class="n">life</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span> <span class="o">-</span>
            <span class="n">life</span><span class="o">.</span><span class="n">endowment_insurance</span><span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">endowment</span><span class="o">=</span><span class="mi">15</span><span class="o">*</span><span class="nb">float</span><span class="p">(</span><span class="n">P</span><span class="p">)))</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">120</span><span class="p">))</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.21&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.21 100: 100.85470085470084 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.22:  (C) 102</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span><span class="o">=</span><span class="n">SULT</span><span class="p">(</span><span class="n">udd</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">UDD</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">life</span><span class="o">=</span><span class="n">life</span><span class="p">)</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">UDD</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">life</span><span class="o">=</span><span class="n">life</span><span class="p">)</span><span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="mi">45</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span> <span class="o">/</span> <span class="mi">12</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">102</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.22&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.22 102: 102.40668704849178 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.23:  (D) 44.7</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">()</span><span class="o">.</span><span class="n">set_a</span><span class="p">(</span><span class="mf">15.3926</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_a</span><span class="p">(</span><span class="mf">10.1329</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_a</span><span class="p">(</span><span class="mf">14.0145</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">P</span><span class="p">):</span>
    <span class="n">per_policy</span> <span class="o">=</span> <span class="mi">30</span> <span class="o">+</span> <span class="p">(</span><span class="mi">30</span> <span class="o">*</span> <span class="n">life</span><span class="o">.</span><span class="n">whole_life_annuity</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
    <span class="n">per_premium</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.6</span> <span class="o">+</span> <span class="mf">0.1</span><span class="o">*</span><span class="n">life</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
                    <span class="o">+</span> <span class="mf">0.1</span><span class="o">*</span><span class="n">life</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">30</span><span class="p">))</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">P</span> <span class="o">*</span> <span class="n">a</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">per_policy</span> <span class="o">+</span> <span class="n">per_premium</span> <span class="o">*</span> <span class="n">P</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">[</span><span class="mf">30.3</span><span class="p">,</span> <span class="mf">49.5</span><span class="p">])</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">44.7</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.23&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.23 44.7: 44.70806635781144 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.24:  (E) 0.30</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">PolicyValues</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">delta</span><span class="o">=</span><span class="mf">0.07</span><span class="p">)</span>
<span class="n">x</span><span class="p">,</span> <span class="n">A1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.30</span>   <span class="c1"># Policy for first insurance</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">premium_equivalence</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">A1</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># Need its premium</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">premium</span><span class="o">=</span><span class="n">P</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">A2</span><span class="p">):</span>  <span class="c1"># Solve for A2, given Var(Loss)</span>
    <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_variance_loss</span><span class="p">(</span><span class="n">A1</span><span class="o">=</span><span class="n">A1</span><span class="p">,</span> <span class="n">A2</span><span class="o">=</span><span class="n">A2</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">)</span>
<span class="n">A2</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mf">0.18</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="mf">0.18</span><span class="p">)</span>

<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">premium</span><span class="o">=</span><span class="mf">0.06</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># Solve second insurance</span>
<span class="n">var</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_variance_loss</span><span class="p">(</span><span class="n">A1</span><span class="o">=</span><span class="n">A1</span><span class="p">,</span> <span class="n">A2</span><span class="o">=</span><span class="n">A2</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.304</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.24&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.24 0.304: 0.30419999999999975 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.25:  (C) 12330</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">woolhouse</span> <span class="o">=</span> <span class="n">Woolhouse</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">life</span><span class="o">=</span><span class="n">life</span><span class="p">)</span>
<span class="n">benefits</span> <span class="o">=</span> <span class="n">woolhouse</span><span class="o">.</span><span class="n">deferred_annuity</span><span class="p">(</span><span class="mi">55</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1000</span> <span class="o">*</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">expenses</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">whole_life_annuity</span><span class="p">(</span><span class="mi">55</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
<span class="n">payments</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="mi">55</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">P</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_future_loss</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">benefits</span> <span class="o">+</span> <span class="n">expenses</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">payments</span><span class="p">,</span>
                                  <span class="n">contract</span><span class="o">=</span><span class="n">Contract</span><span class="p">(</span><span class="n">premium</span><span class="o">=</span><span class="n">P</span><span class="p">))</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=-</span><span class="mi">800</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">[</span><span class="mi">12110</span><span class="p">,</span> <span class="mi">12550</span><span class="p">])</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">12330</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.25&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-----
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> Q6.25 12330: 12325.781125438532 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.26  (D) 180</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">P</span><span class="p">):</span> 
    <span class="k">return</span> <span class="n">P</span> <span class="o">-</span> <span class="n">life</span><span class="o">.</span><span class="n">net_premium</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">initial_cost</span><span class="o">=</span><span class="n">P</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">[</span><span class="mi">150</span><span class="p">,</span> <span class="mi">190</span><span class="p">])</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">180</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.26&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.26 180: 180.03164891315885 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.27:  (D) 10310</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">ConstantForce</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="mf">0.03</span><span class="p">)</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">delta</span><span class="o">=</span><span class="mf">0.06</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">payments</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="n">life</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> 
            <span class="o">+</span> <span class="n">life</span><span class="o">.</span><span class="n">deferred_annuity</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
<span class="n">benefits</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1000000</span> <span class="o">*</span> <span class="n">life</span><span class="o">.</span><span class="n">term_insurance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="o">+</span> <span class="mi">500000</span> <span class="o">*</span> <span class="n">life</span><span class="o">.</span><span class="n">deferred_insurance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">benefits</span> <span class="o">/</span> <span class="n">payments</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">10310</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.27&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.27 10310: 10309.617799001708 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.28  (B) 36</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> 
                       <span class="n">initial_policy</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">renewal_premium</span><span class="o">=</span><span class="mf">.05</span><span class="p">,</span>
                       <span class="n">renewal_policy</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">initial_premium</span><span class="o">=</span><span class="mf">.2</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">36</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.28&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.28 36: 35.72634219391481 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.29  (B) 20.5</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">Premiums</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.035</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">life</span><span class="o">.</span><span class="n">insurance_twin</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">),</span> <span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> 
                              <span class="n">initial_policy</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">initial_premium</span><span class="o">=</span><span class="mf">.5</span><span class="p">,</span>
                              <span class="n">renewal_policy</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">renewal_premium</span><span class="o">=</span><span class="mf">.1</span><span class="p">,</span>
                              <span class="n">benefit</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">1770</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">22</span><span class="p">])</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">20.5</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.29&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.29 20.5: 20.480268314431726 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.30:  (A) 900</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">PolicyValues</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.04</span><span class="p">)</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">premium</span><span class="o">=</span><span class="mf">2.338</span><span class="p">,</span>
                    <span class="n">benefit</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                    <span class="n">initial_premium</span><span class="o">=</span><span class="mf">.1</span><span class="p">,</span>
                    <span class="n">renewal_premium</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="n">var</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_variance_loss</span><span class="p">(</span><span class="n">A1</span><span class="o">=</span><span class="n">life</span><span class="o">.</span><span class="n">insurance_twin</span><span class="p">(</span><span class="mf">16.50</span><span class="p">),</span>
                               <span class="n">A2</span><span class="o">=</span><span class="mf">0.17</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">900</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.30&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.30 900: 908.141412994607 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.31:  (D) 1330</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">ConstantForce</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">delta</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="p">(</span><span class="n">life</span><span class="o">.</span><span class="n">term_insurance</span><span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> 
     <span class="o">+</span> <span class="n">life</span><span class="o">.</span><span class="n">E_x</span><span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">35</span><span class="p">)</span><span class="o">*</span><span class="mf">0.51791</span><span class="p">)</span>     <span class="c1"># A_35</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">premium_equivalence</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">100000</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">1330</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.31&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.31 1330: 1326.5406293909457 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.32:  (C) 550</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span><span class="o">.</span><span class="n">set_a</span><span class="p">(</span><span class="mf">9.19</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>
<span class="n">benefits</span> <span class="o">=</span> <span class="n">UDD</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">life</span><span class="o">=</span><span class="n">life</span><span class="p">)</span><span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">payments</span> <span class="o">=</span> <span class="n">UDD</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">life</span><span class="o">=</span><span class="n">life</span><span class="p">)</span><span class="o">.</span><span class="n">whole_life_annuity</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">payments</span><span class="p">,</span> <span class="n">A</span><span class="o">=</span><span class="n">benefits</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span><span class="o">/</span><span class="mi">12</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">550</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.32&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> *Whole Life Insurance A_0(t=WL) &lt;--
   A_x = 1 - d * a_x                                             ~annuity twin
----- Q6.32 550: 550.4356936711871 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.33:  (B) 0.13</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">Insurance</span><span class="p">()</span><span class="o">.</span><span class="n">set_survival</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">t</span><span class="p">:</span> <span class="mf">0.02</span><span class="o">*</span><span class="n">t</span><span class="p">)</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.03</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">var</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">E_x</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">moment</span><span class="o">=</span><span class="n">life</span><span class="o">.</span><span class="n">_VARIANCE</span><span class="p">,</span> <span class="n">endowment</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="mi">1</span><span class="o">-</span> <span class="n">life</span><span class="o">.</span><span class="n">portfolio_cdf</span><span class="p">(</span><span class="n">mean</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">variance</span><span class="o">=</span><span class="n">var</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">50000</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.13</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.33&quot;</span><span class="p">,</span> <span class="n">rel_tol</span><span class="o">=</span><span class="mf">0.02</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.33 0.13: 0.12828940905648634 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.34:  (A) 23300</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">benefit</span><span class="p">):</span>
    <span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="mi">61</span><span class="p">)</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">whole_life_annuity</span><span class="p">(</span><span class="mi">61</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="n">benefit</span><span class="p">,</span> 
                              <span class="n">initial_premium</span><span class="o">=</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">renewal_premium</span><span class="o">=</span><span class="mf">0.03</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">[</span><span class="mi">23300</span><span class="p">,</span> <span class="mi">23700</span><span class="p">])</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">23300</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.34&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.34 23300: 23294.288659265632 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.35:  (D) 530</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sult</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">whole_life_annuity</span><span class="p">(</span><span class="mi">35</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">initial_premium</span><span class="o">=</span><span class="mf">.19</span><span class="p">,</span> <span class="n">renewal_premium</span><span class="o">=</span><span class="mf">.04</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">530</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.35&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.35 530: 534.4072234303344 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.36:  (B) 500</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">ConstantForce</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="mf">0.04</span><span class="p">)</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">delta</span><span class="o">=</span><span class="mf">0.08</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">term_insurance</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">R</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">initial_premium</span><span class="o">=</span><span class="n">R</span><span class="o">/</span><span class="mi">4500</span><span class="p">,</span>
                              <span class="n">renewal_premium</span><span class="o">=</span><span class="n">R</span><span class="o">/</span><span class="mi">4500</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>
<span class="n">R</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">4500</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">[</span><span class="mi">400</span><span class="p">,</span> <span class="mi">800</span><span class="p">])</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="n">R</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.36&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.36 500: 500.0 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.37:  (D) 820</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sult</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">benefits</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">50000</span> <span class="o">+</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">expenses</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">immediate_annuity</span><span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="p">(</span><span class="n">benefits</span> <span class="o">+</span> <span class="n">expenses</span><span class="p">)</span> <span class="o">/</span> <span class="n">a</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">820</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.37&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.37 820: 819.7190338249138 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.38:  (B) 11.3</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_A</span><span class="p">(</span><span class="mf">0.192</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">n</span><span class="p">,</span> <span class="n">endowment</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_E</span><span class="p">(</span><span class="mf">0.172</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">n</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>   <span class="c1"># solve for discrete annuity, given continuous</span>
    <span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
    <span class="n">life</span><span class="o">.</span><span class="n">set_a</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">set_E</span><span class="p">(</span><span class="mf">0.172</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">UDD</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">life</span><span class="o">=</span><span class="n">life</span><span class="p">)</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="n">a</span><span class="p">)</span>  <span class="c1"># discrete annuity</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">A</span><span class="o">=</span><span class="mf">0.192</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">11.3</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.38&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> *Temporary Annuity a_0(t=10) &lt;--
   a_0(t=10) = [ 1 - A_0(t=10) ] / d(t=10)                       ~annuity twin
      a_0(t=1) = 1                                  ~one-year discrete annuity
      a_1(t=1) = 1                                  ~one-year discrete annuity
----- Q6.38 11.3: 11.308644185253657 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.39:  (A) 29</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sult</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">P40</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">premium_equivalence</span><span class="p">(</span><span class="n">sult</span><span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span> <span class="n">b</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">P80</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">premium_equivalence</span><span class="p">(</span><span class="n">sult</span><span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="mi">80</span><span class="p">),</span> <span class="n">b</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">p40</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">p_x</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">p80</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">p_x</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="p">(</span><span class="n">P40</span> <span class="o">*</span> <span class="n">p40</span> <span class="o">+</span> <span class="n">P80</span> <span class="o">*</span> <span class="n">p80</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">p80</span> <span class="o">+</span> <span class="n">p40</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">29</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.39&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.39 29: 29.033866427845496 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.40: (C) 116</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># - standard formula discounts/accumulates by too much (i should be smaller)</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.06</span><span class="p">)</span><span class="o">.</span><span class="n">set_a</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">set_q</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">whole_life_annuity</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="mi">110</span> <span class="o">*</span> <span class="n">a</span> <span class="o">/</span> <span class="mi">1000</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.06</span><span class="p">)</span><span class="o">.</span><span class="n">set_A</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">set_q</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>
<span class="n">A1</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">A1</span> <span class="o">/</span> <span class="mf">1.03</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">116</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.40&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> *Whole Life Annuity a_0(t=WL) &lt;--
   a_0(t=WL) = 1 + E_0(t=1) * a_1(t=WL)                    ~backward recursion
    E_0(t=1) = p_0 * v(t=1)                                    ~pure endowment
     p_0 = 1 - q_0                                    ~complement of mortality
 *Whole Life Insurance A_1(t=WL) &lt;--
     A_1(t=WL) = [ A_0(t=WL) /v - q_1 * b ] / p_1           ~forward recursion
      p_0 = 1 - q_0                                   ~complement of mortality
----- Q6.40 116: 116.51945397474269 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.41:  (B) 1417</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">LifeTable</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span><span class="o">.</span><span class="n">set_table</span><span class="p">(</span><span class="n">q</span><span class="o">=</span><span class="p">{</span><span class="n">x</span><span class="p">:</span><span class="mf">.01</span><span class="p">,</span> <span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span><span class="mf">.02</span><span class="p">})</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">life</span><span class="o">.</span><span class="n">E_x</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1.01</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">deferred_insurance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mf">1.01</span><span class="o">*</span><span class="n">life</span><span class="o">.</span><span class="n">deferred_insurance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="mi">100000</span> <span class="o">*</span> <span class="n">A</span> <span class="o">/</span> <span class="n">a</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">1417</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.41&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.41 1417: 1416.9332301924137 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.42:  (D) 0.113</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">ConstantForce</span><span class="p">(</span><span class="n">mu</span><span class="o">=</span><span class="mf">0.06</span><span class="p">)</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">delta</span><span class="o">=</span><span class="mf">0.06</span><span class="p">)</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">discrete</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">premium</span><span class="o">=</span><span class="mf">315.8</span><span class="p">,</span> 
                    <span class="n">T</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">endowment</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">L</span> <span class="o">=</span> <span class="p">[</span><span class="n">life</span><span class="o">.</span><span class="n">L_from_t</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>    <span class="c1"># L(t)</span>
<span class="n">Q</span> <span class="o">=</span> <span class="p">[</span><span class="n">life</span><span class="o">.</span><span class="n">q_x</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="n">u</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>              <span class="c1"># prob(die in year t)</span>
<span class="n">Q</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="nb">sum</span><span class="p">(</span><span class="n">Q</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>   <span class="c1"># follows SOA Solution: incorrectly treats endowment!</span>
<span class="n">p</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">q</span> <span class="k">for</span> <span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span> <span class="p">(</span><span class="n">Q</span><span class="p">,</span> <span class="n">L</span><span class="p">)</span> <span class="k">if</span> <span class="n">l</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.113</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.42&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.42 0.113: 0.11307956328284252 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.43:  (C) 170</p>
<ul class="simple">
<li><p>although 10-year term, premiums only paid first first years: separately calculate the EPV of per-policy maintenance expenses in years 6-10 and treat as additional initial expense</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sult</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">term_insurance</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">other_expenses</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">sult</span><span class="o">.</span><span class="n">deferred_annuity</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">200000</span><span class="p">,</span> <span class="n">initial_premium</span><span class="o">=</span><span class="mf">0.35</span><span class="p">,</span>
                       <span class="n">initial_policy</span><span class="o">=</span><span class="mi">8</span> <span class="o">+</span> <span class="n">other_expenses</span><span class="p">,</span> <span class="n">renewal_policy</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                       <span class="n">renewal_premium</span><span class="o">=</span><span class="mf">0.15</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">170</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.43&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.43 170: 171.22371939459944 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.44:  (D) 2.18</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_IA</span><span class="p">(</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_a</span><span class="p">(</span><span class="mi">17</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_a</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_E</span><span class="p">(</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">deferred_insurance</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">IA</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">increasing_insurance</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">IA</span><span class="o">=</span><span class="n">IA</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">2.2</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.44&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> *Whole Life Insurance A_60(t=WL) &lt;--
   A_x = 1 - d * a_x                                             ~annuity twin
 *Whole Life Insurance A_60(t=WL) &lt;--
   A_x = 1 - d * a_x                                             ~annuity twin
 *Whole Life Insurance A_60(t=WL) &lt;--
   A_x = 1 - d * a_x                                             ~annuity twin
----- Q6.44 2.2: 2.183803457688809 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.45:  (E) 690</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">(</span><span class="n">udd</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">benefit</span><span class="o">=</span><span class="mi">100000</span><span class="p">,</span> <span class="n">premium</span><span class="o">=</span><span class="mi">560</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">L</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">L_from_prob</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">prob</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">)</span>
<span class="n">life</span><span class="o">.</span><span class="n">L_plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">,</span> 
            <span class="n">T</span><span class="o">=</span><span class="n">life</span><span class="o">.</span><span class="n">L_to_t</span><span class="p">(</span><span class="n">L</span><span class="o">=</span><span class="n">L</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">))</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">690</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.45&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.45 690: 689.2659416264196 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
<img alt="_images/e25a8beba146e45cebddae2b3a8e4a4a0c8461efb19eb810e5521b71b2d00767.png" src="_images/e25a8beba146e45cebddae2b3a8e4a4a0c8461efb19eb810e5521b71b2d00767.png" />
</div>
</div>
<p>SOA Question 6.46:  (E) 208</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_IA</span><span class="p">(</span><span class="mf">0.51213</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">55</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_a</span><span class="p">(</span><span class="mf">12.2758</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">55</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_a</span><span class="p">(</span><span class="mf">7.4575</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">55</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">deferred_annuity</span><span class="p">(</span><span class="mi">55</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">IA</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">increasing_insurance</span><span class="p">(</span><span class="mi">55</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="mi">55</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">IA</span><span class="o">=</span><span class="n">IA</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">208</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.46&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> *Deferred Annuity a_55(t=WL,u=10) &lt;--
      a_55(t=1) = 1                                 ~one-year discrete annuity
      a_56(t=1) = 1                                 ~one-year discrete annuity
----- Q6.46 208: 208.12282139036515 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.47:  (D) 66400</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sult</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">deferred_annuity</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">100000</span><span class="p">,</span> <span class="n">initial_premium</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span>
                        <span class="n">renewal_premium</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">66400</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.47&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.47 66400: 66384.13293704337 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.48:  (A) 3195 – example of deep insurance recursion</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.06</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_p</span><span class="p">(</span><span class="mf">.95</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_q</span><span class="p">(</span><span class="mf">.02</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="o">+</span><span class="mi">5</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_q</span><span class="p">(</span><span class="mf">.03</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="o">+</span><span class="mi">6</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_q</span><span class="p">(</span><span class="mf">.04</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="o">+</span><span class="mi">7</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">life</span><span class="o">.</span><span class="n">E_x</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">deferred_insurance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">3195</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.48&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> *Pure Endowment E_0(t=5) &lt;--
   E_0(t=5) = p_0(t=5) * v(t=5)                                ~pure endowment
 *Pure Endowment E_0(t=5) &lt;--
   E_0(t=5) = p_0(t=5) * v(t=5)                                ~pure endowment
 *Term Insurance A_5(t=3) &lt;--
   A_5(t=3) = v * [ q_5 * b + p_5 * A_6(t=2) ]             ~backward recursion
    p_5 = 1 - q_5                                     ~complement of mortality
    A_6(t=2) = v * [ q_6 * b + p_6 * A_7(t=1) ]            ~backward recursion
     p_6 = 1 - q_6                                    ~complement of mortality
     A_7(t=1) = A_7(t=1,endow=1) - E_7(t=1)        ~endowment insurance - pure
      E_7(t=1) = p_7 * v(t=1)                                  ~pure endowment
     p_7 = 1 - q_7                                    ~complement of mortality
 *Term Insurance A_5(t=3) &lt;--
   A_5(t=3) = v * [ q_5 * b + p_5 * A_6(t=2) ]             ~backward recursion
    p_5 = 1 - q_5                                     ~complement of mortality
    A_6(t=2) = v * [ q_6 * b + p_6 * A_7(t=1) ]            ~backward recursion
     p_6 = 1 - q_6                                    ~complement of mortality
     A_7(t=1) = A_7(t=1,endow=1) - E_7(t=1)        ~endowment insurance - pure
      E_7(t=1) = p_7 * v(t=1)                                  ~pure endowment
     p_7 = 1 - q_7                                    ~complement of mortality
----- Q6.48 3195: 3195.1189176587473 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.49:  (C) 86</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sult</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">(</span><span class="n">udd</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">UDD</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">life</span><span class="o">=</span><span class="n">sult</span><span class="p">)</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">100000</span><span class="p">,</span> <span class="n">initial_policy</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
                       <span class="n">renewal_premium</span><span class="o">=</span><span class="mf">0.04</span><span class="p">,</span> <span class="n">initial_premium</span><span class="o">=</span><span class="mf">0.04</span><span class="p">)</span> <span class="o">/</span> <span class="mi">12</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">86</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.49&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.49 86: 85.99177833261696 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.50:  (A) -47000</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">premium_equivalence</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">life</span><span class="o">.</span><span class="n">whole_life_annuity</span><span class="p">(</span><span class="mi">35</span><span class="p">),</span> <span class="n">b</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span> 
<span class="n">a</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">deferred_annuity</span><span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">term_insurance</span><span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">cash</span> <span class="o">=</span> <span class="p">(</span><span class="n">A</span> <span class="o">-</span> <span class="n">a</span> <span class="o">*</span> <span class="n">P</span><span class="p">)</span> <span class="o">*</span> <span class="mi">10000</span> <span class="o">/</span> <span class="n">life</span><span class="o">.</span><span class="n">interest</span><span class="o">.</span><span class="n">v</span>
<span class="n">isclose</span><span class="p">(</span><span class="o">-</span><span class="mi">47000</span><span class="p">,</span> <span class="n">cash</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.50&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.50 -47000: -46948.2187697819 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.51:  (D) 34700</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">()</span><span class="o">.</span><span class="n">set_DA</span><span class="p">(</span><span class="mf">0.4891</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">62</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>\
                   <span class="o">.</span><span class="n">set_A</span><span class="p">(</span><span class="mf">0.0910</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">62</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>\
                   <span class="o">.</span><span class="n">set_a</span><span class="p">(</span><span class="mf">12.2758</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">62</span><span class="p">)</span>\
                   <span class="o">.</span><span class="n">set_a</span><span class="p">(</span><span class="mf">7.4574</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">62</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">IA</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">increasing_insurance</span><span class="p">(</span><span class="mi">62</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">deferred_annuity</span><span class="p">(</span><span class="mi">62</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="mi">62</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">IA</span><span class="o">=</span><span class="n">IA</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">50000</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">34700</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.51&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> *Increasing Insurance IA_62(t=10) &lt;--
   IA_62(t=10) = 11 A_62(t=10) - DA_62(t=10)       ~varying insurance identity
 *Deferred Annuity a_62(t=WL,u=10) &lt;--
      a_62(t=1) = 1                                 ~one-year discrete annuity
      a_63(t=1) = 1                                 ~one-year discrete annuity
----- Q6.51 34700: 34687.207544453246 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.52:  (D) 50.80</p>
<ul class="simple">
<li><p>set face value benefits to 0</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sult</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">other_cost</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">sult</span><span class="o">.</span><span class="n">deferred_annuity</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">A</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>    <span class="c1"># set face value H = 0</span>
                       <span class="n">initial_premium</span><span class="o">=</span><span class="mf">1.05</span><span class="p">,</span> <span class="n">renewal_premium</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span>
                       <span class="n">initial_policy</span><span class="o">=</span><span class="mi">100</span> <span class="o">+</span> <span class="n">other_cost</span><span class="p">,</span> <span class="n">renewal_policy</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">50.8</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.52&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.52 50.8: 50.80135534704229 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.53:  (D) 720</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">LifeTable</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.08</span><span class="p">)</span><span class="o">.</span><span class="n">set_table</span><span class="p">(</span><span class="n">q</span><span class="o">=</span><span class="p">{</span><span class="n">x</span><span class="p">:</span><span class="mf">.1</span><span class="p">,</span> <span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span><span class="mf">.1</span><span class="p">,</span> <span class="n">x</span><span class="o">+</span><span class="mi">2</span><span class="p">:</span><span class="mf">.1</span><span class="p">})</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">term_insurance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span> <span class="n">initial_premium</span><span class="o">=</span><span class="mf">0.35</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">720</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.53&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.53 720: 720.1646090534978 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 6.54:  (A) 25440</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">std</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">life</span><span class="o">.</span><span class="n">net_policy_variance</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">200000</span><span class="p">))</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">25440</span><span class="p">,</span> <span class="n">std</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q6.54&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q6.54 25440: 25441.694847703857 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
</section>
<section id="policy-values">
<h2>7 Policy Values<a class="headerlink" href="#policy-values" title="Permalink to this heading">#</a></h2>
<p>SOA Question 7.1:  (C) 11150</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">t</span> <span class="o">=</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span>
<span class="n">A</span> <span class="o">=</span> <span class="p">(</span><span class="n">life</span><span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">t</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">50000</span><span class="p">)</span>
     <span class="o">+</span> <span class="n">life</span><span class="o">.</span><span class="n">deferred_insurance</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">t</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="n">n</span><span class="o">-</span><span class="n">t</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">50000</span><span class="p">))</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">t</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">n</span><span class="o">-</span><span class="n">t</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">875</span><span class="p">)</span>
<span class="n">L</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_future_loss</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">11150</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.1&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.1 11150: 11152.108749338717 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.2:  (C) 1152</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">.1</span><span class="p">)</span>\
                               <span class="o">.</span><span class="n">set_q</span><span class="p">(</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>\
                               <span class="o">.</span><span class="n">set_q</span><span class="p">(</span><span class="mf">0.165</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>\
                               <span class="o">.</span><span class="n">set_reserves</span><span class="p">(</span><span class="n">T</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">endowment</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">P</span><span class="p">):</span>  <span class="c1"># solve P s.t. V is equal backwards and forwards</span>
    <span class="n">policy</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">premium</span><span class="o">=</span><span class="n">P</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="n">reserve_benefit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">t_V_backward</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">**</span><span class="n">policy</span><span class="p">)</span> <span class="o">-</span> <span class="n">life</span><span class="o">.</span><span class="n">t_V_forward</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">**</span><span class="n">policy</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">[</span><span class="mi">1070</span><span class="p">,</span> <span class="mi">1230</span><span class="p">])</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">1152</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.2&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.2 1152: 1151.5151515151515 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.3:  (E) 730</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># x=0 is (90) and interpret every 3 months as t=1 year</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">LifeTable</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.08</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_table</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="mi">898</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">800</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="mi">706</span><span class="p">})</span>\
                  <span class="o">.</span><span class="n">set_reserves</span><span class="p">(</span><span class="n">T</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">V</span><span class="o">=</span><span class="p">{</span><span class="mi">3</span><span class="p">:</span> <span class="mf">753.72</span><span class="p">})</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">t_V_backward</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">premium</span><span class="o">=</span><span class="mi">60</span><span class="o">*</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">set_reserves</span><span class="p">(</span><span class="n">V</span><span class="o">=</span><span class="p">{</span><span class="mi">2</span><span class="p">:</span> <span class="n">V</span><span class="p">})</span>\
        <span class="o">.</span><span class="n">t_V_backward</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">premium</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">730</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.3&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.3 730: 729.998398765594 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.4:  (B) -74 – split benefits into two policies</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">life</span><span class="o">.</span><span class="n">whole_life_annuity</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
                       <span class="n">A</span><span class="o">=</span><span class="n">life</span><span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
                       <span class="n">initial_policy</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">renewal_policy</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                       <span class="n">benefit</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">P</span> <span class="o">+=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">life</span><span class="o">.</span><span class="n">whole_life_annuity</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
                        <span class="n">A</span><span class="o">=</span><span class="n">life</span><span class="o">.</span><span class="n">deferred_insurance</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">11</span><span class="p">),</span>
                        <span class="n">benefit</span><span class="o">=</span><span class="mi">4000</span><span class="p">)</span>   <span class="c1"># for deferred portion</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">benefit</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">premium</span><span class="o">=</span><span class="mf">1.02</span><span class="o">*</span><span class="n">P</span><span class="p">,</span> 
                    <span class="n">renewal_policy</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">initial_policy</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_policy_value</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">)</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">benefit</span><span class="o">=</span><span class="mi">4000</span><span class="p">,</span> <span class="n">premium</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>  
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">deferred_insurance</span><span class="p">(</span><span class="mi">41</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">V</span> <span class="o">+=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_future_loss</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">)</span>   <span class="c1"># for deferred portion</span>
<span class="n">isclose</span><span class="p">(</span><span class="o">-</span><span class="mi">74</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.4&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.4 -74: -73.942155695248 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.5:  (E) 1900</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">(</span><span class="n">udd</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.03</span><span class="p">)</span>\
                          <span class="o">.</span><span class="n">set_q</span><span class="p">(</span><span class="mf">0.04561</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="o">+</span><span class="mi">4</span><span class="p">)</span>\
                          <span class="o">.</span><span class="n">set_reserves</span><span class="p">(</span><span class="n">T</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">V</span><span class="o">=</span><span class="p">{</span><span class="mi">4</span><span class="p">:</span> <span class="mf">1405.08</span><span class="p">})</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">r_V_forward</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="n">premium</span><span class="o">=</span><span class="mf">647.46</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">1900</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.5&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.5 1900: 1901.766021537228 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>Answer 7.6:  (E) -25.4</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">net_premium</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">benefit</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span> <span class="n">initial_premium</span><span class="o">=</span><span class="mf">.25</span><span class="p">,</span> <span class="n">renewal_premium</span><span class="o">=</span><span class="mf">.05</span><span class="p">,</span>
                    <span class="n">initial_policy</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="mf">1.5</span> <span class="o">+</span> <span class="mi">30</span><span class="p">,</span> <span class="n">renewal_policy</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="mf">.5</span> <span class="o">+</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">life</span><span class="o">.</span><span class="n">whole_life_annuity</span><span class="p">(</span><span class="mi">45</span><span class="p">),</span> <span class="o">**</span><span class="n">contract</span><span class="o">.</span><span class="n">premium_terms</span><span class="p">)</span>
<span class="n">gross</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_policy_value</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="o">.</span><span class="n">set_contract</span><span class="p">(</span><span class="n">premium</span><span class="o">=</span><span class="n">G</span><span class="p">))</span>
<span class="n">net</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">net_policy_value</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">gross</span> <span class="o">-</span> <span class="n">net</span>
<span class="n">isclose</span><span class="p">(</span><span class="o">-</span><span class="mf">25.4</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.6&quot;</span><span class="p">)</span>    
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.6 -25.4: -25.44920289521204 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.7:  (D) 1110</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span><span class="o">.</span><span class="n">set_A</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="o">+</span><span class="mi">10</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">Woolhouse</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">life</span><span class="o">=</span><span class="n">life</span><span class="p">)</span><span class="o">.</span><span class="n">whole_life_annuity</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">10</span><span class="p">)</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">premium</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="n">renewal_policy</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_future_loss</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="o">.</span><span class="n">renewals</span><span class="p">())</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">premium</span><span class="o">=</span><span class="mi">30</span><span class="o">*</span><span class="mi">12</span><span class="p">,</span> <span class="n">renewal_premium</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="n">V</span> <span class="o">+=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_future_loss</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="o">.</span><span class="n">renewals</span><span class="p">())</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">1110</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.7&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> *Whole Life Annuity a_10(t=WL) &lt;--
   a_x = (1-A_x) / d                                           ~insurance twin
      a_10(t=1) = 1                                 ~one-year discrete annuity
      a_11(t=1) = 1                                 ~one-year discrete annuity
----- Q7.7 1110: 1107.9718253968258 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.8:  (C) 29.85</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sult</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">70</span>
<span class="n">q</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span> <span class="p">[</span><span class="n">sult</span><span class="o">.</span><span class="n">q_x</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">k</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mf">.7</span> <span class="o">+</span> <span class="mf">.1</span><span class="o">*</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span> <span class="o">+</span> <span class="p">[</span><span class="n">sult</span><span class="o">.</span><span class="n">q_x</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">3</span><span class="p">)]}</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">.05</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_q</span><span class="p">(</span><span class="n">sult</span><span class="o">.</span><span class="n">q_x</span><span class="p">(</span><span class="mi">70</span><span class="p">)</span><span class="o">*</span><span class="mf">.7</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_reserves</span><span class="p">(</span><span class="n">T</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">t_V</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">70</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">premium</span><span class="o">=</span><span class="mf">35.168</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">29.85</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.8&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> *Survival p_70 &lt;--
   p_70 = 1 - q_70                                    ~complement of mortality
----- Q7.8 29.85: 29.85469179271202 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.9:  (A) 38100</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sult</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">(</span><span class="n">udd</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">t</span> <span class="o">=</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">UDD</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">life</span><span class="o">=</span><span class="n">sult</span><span class="p">)</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">n</span><span class="o">-</span><span class="mi">10</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">UDD</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">life</span><span class="o">=</span><span class="n">sult</span><span class="p">)</span><span class="o">.</span><span class="n">endowment_insurance</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">n</span><span class="o">-</span><span class="mi">10</span><span class="p">)</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">premium</span><span class="o">=</span><span class="mi">253</span><span class="o">*</span><span class="mi">12</span><span class="p">,</span> <span class="n">endowment</span><span class="o">=</span><span class="mi">100000</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">sult</span><span class="o">.</span><span class="n">gross_future_loss</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">38100</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.9&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.9 38100: 38099.62176709246 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.10: (C) -970</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">G</span> <span class="o">=</span> <span class="mf">977.6</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">net_premium</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">benefit</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">premium</span><span class="o">=</span><span class="n">G</span><span class="o">-</span><span class="n">P</span><span class="p">,</span> <span class="n">renewal_policy</span><span class="o">=</span><span class="mf">.02</span><span class="o">*</span><span class="n">G</span> <span class="o">+</span> <span class="mi">50</span><span class="p">)</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_policy_value</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="o">-</span><span class="mi">970</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.10&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.10 -970: -971.8909301877826 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.11:  (B) 1460</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span><span class="o">.</span><span class="n">set_a</span><span class="p">(</span><span class="mf">13.4205</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">55</span><span class="p">)</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">benefit</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">P</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">L_from_t</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="o">.</span><span class="n">set_contract</span><span class="p">(</span><span class="n">premium</span><span class="o">=</span><span class="n">P</span><span class="p">))</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">4450</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_policy_value</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="o">.</span><span class="n">set_contract</span><span class="p">(</span><span class="n">premium</span><span class="o">=</span><span class="n">P</span><span class="p">))</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">1460</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.11&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> *Whole Life Insurance A_55(t=WL) &lt;--
   A_x = 1 - d * a_x                                             ~annuity twin
----- Q7.11 1460: 1459.9818035330218 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.12:  (E) 4.09</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">benefit</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">k</span><span class="p">:</span> <span class="mi">26</span> <span class="o">-</span> <span class="n">k</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">44</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.04</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_q</span><span class="p">(</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">55</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_reserves</span><span class="p">(</span><span class="n">T</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">endowment</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">V</span><span class="o">=</span><span class="p">{</span><span class="mi">11</span><span class="p">:</span> <span class="mf">5.</span><span class="p">})</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">P</span><span class="p">):</span>  <span class="c1"># solve for net premium, from final year recursion</span>
    <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">t_V</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">24</span><span class="p">,</span> <span class="n">premium</span><span class="o">=</span><span class="n">P</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="n">benefit</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>    <span class="c1"># solved net premium</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">t_V</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">premium</span><span class="o">=</span><span class="n">P</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="n">benefit</span><span class="p">)</span>  <span class="c1"># recursion formula</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">4.09</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.12&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> *Survival p_55 &lt;--
   p_55 = 1 - q_55                                    ~complement of mortality
----- Q7.12 4.09: 4.089411764705883 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>Answer 7.13: (A) 180</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">FPT_policy_value</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">endowment</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">180</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.13&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.13 180: 180.1071785904076 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.14:  (A) 2200</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">45</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>\
                               <span class="o">.</span><span class="n">set_q</span><span class="p">(</span><span class="mf">0.009</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>\
                               <span class="o">.</span><span class="n">set_reserves</span><span class="p">(</span><span class="n">T</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">V</span><span class="o">=</span><span class="p">{</span><span class="mi">5</span><span class="p">:</span> <span class="mi">5500</span><span class="p">})</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">P</span><span class="p">):</span>  <span class="c1"># solve for net premium,</span>
    <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">t_V</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">premium</span><span class="o">=</span><span class="n">P</span><span class="o">*</span><span class="mf">0.96</span> <span class="o">-</span> <span class="mi">50</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="mi">100000</span><span class="o">+</span><span class="mi">200</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">7100</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">[</span><span class="mi">2200</span><span class="p">,</span> <span class="mi">2400</span><span class="p">])</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">2200</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.14&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.14 2200: 2197.8174603174602 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.15:  (E) 50.91</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">(</span><span class="n">udd</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>\
                       <span class="o">.</span><span class="n">set_q</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="o">+</span><span class="mi">15</span><span class="p">)</span>\
                       <span class="o">.</span><span class="n">set_reserves</span><span class="p">(</span><span class="n">T</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">V</span><span class="o">=</span><span class="p">{</span><span class="mi">16</span><span class="p">:</span> <span class="mf">49.78</span><span class="p">})</span>\
                       <span class="o">.</span><span class="n">r_V_backward</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">50.91</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.15&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.15 50.91: 50.91362826922369 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.16:  (D) 380</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SelectLife</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">v</span><span class="o">=</span><span class="mf">.95</span><span class="p">)</span>\
                   <span class="o">.</span><span class="n">set_table</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="p">{</span><span class="mi">86</span><span class="p">:</span> <span class="p">[</span><span class="mi">683</span><span class="o">/</span><span class="mi">1000</span><span class="p">]},</span>
                              <span class="n">q</span><span class="o">=</span><span class="p">{</span><span class="mi">80</span><span class="o">+</span><span class="n">k</span><span class="p">:</span> <span class="p">[</span><span class="mf">.01</span><span class="o">*</span><span class="p">(</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)})</span>
<span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">t</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">t</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">n</span><span class="o">-</span><span class="n">t</span><span class="p">)</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_future_loss</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">Contract</span><span class="p">(</span><span class="n">benefit</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">premium</span><span class="o">=</span><span class="mi">130</span><span class="p">))</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">380</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.16&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.16 380: 381.6876905200001 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.17:  (D) 1.018</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">v</span><span class="o">=</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">0.90703</span><span class="p">))</span>\
                  <span class="o">.</span><span class="n">set_q</span><span class="p">(</span><span class="mf">0.02067</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="o">+</span><span class="mi">10</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_A</span><span class="p">(</span><span class="mf">0.52536</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="o">+</span><span class="mi">11</span><span class="p">)</span>\
                  <span class="o">.</span><span class="n">set_A</span><span class="p">(</span><span class="mf">0.30783</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="o">+</span><span class="mi">11</span><span class="p">,</span> <span class="n">moment</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">A1</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">10</span><span class="p">)</span>
<span class="n">A2</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span> <span class="n">moment</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ratio</span> <span class="o">=</span> <span class="p">(</span><span class="n">life</span><span class="o">.</span><span class="n">insurance_variance</span><span class="p">(</span><span class="n">A2</span><span class="o">=</span><span class="n">A2</span><span class="p">,</span> <span class="n">A1</span><span class="o">=</span><span class="n">A1</span><span class="p">)</span> 
         <span class="o">/</span> <span class="n">life</span><span class="o">.</span><span class="n">insurance_variance</span><span class="p">(</span><span class="n">A2</span><span class="o">=</span><span class="mf">0.30783</span><span class="p">,</span> <span class="n">A1</span><span class="o">=</span><span class="mf">0.52536</span><span class="p">))</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">1.018</span><span class="p">,</span> <span class="n">ratio</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.17&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> *Whole Life Insurance A_10(t=WL) &lt;--
   A_10(t=WL) = v * [ q_10 * b + p_10 * A_11(t=WL) ]       ~backward recursion
    p_10 = 1 - q_10                                   ~complement of mortality
 *Whole Life Insurance A_10(t=WL,mom=2) &lt;--
   A_10(t=WL,mom=2) = v^2 * [ q_10 * b^2 + p_10 * A_11(t=WL,mom=2) ]     ~backward recursion
    p_10 = 1 - q_10                                   ~complement of mortality
----- Q7.17 1.018: 1.0182465434445054 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.18:  (A) 17.1</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.04</span><span class="p">)</span><span class="o">.</span><span class="n">set_q</span><span class="p">(</span><span class="mf">0.009</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">set_a</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">net_policy_value</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mf">0.012</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">[</span><span class="mf">17.1</span><span class="p">,</span> <span class="mf">19.1</span><span class="p">])</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">17.1</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.18&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.18 17.1: 17.07941929974385 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.19:  (D) 720</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">benefit</span><span class="o">=</span><span class="mi">100000</span><span class="p">,</span>
                    <span class="n">initial_policy</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
                    <span class="n">initial_premium</span><span class="o">=</span><span class="mf">.5</span><span class="p">,</span>
                    <span class="n">renewal_premium</span><span class="o">=</span><span class="mf">.1</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">life</span><span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span> <span class="o">**</span><span class="n">contract</span><span class="o">.</span><span class="n">premium_terms</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="mi">41</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">immediate_annuity</span><span class="p">(</span><span class="mi">41</span><span class="p">)</span>   <span class="c1"># after premium and expenses are paid</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_future_loss</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span>
                           <span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span>
                           <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="o">.</span><span class="n">set_contract</span><span class="p">(</span><span class="n">premium</span><span class="o">=</span><span class="n">P</span><span class="p">)</span><span class="o">.</span><span class="n">renewals</span><span class="p">())</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">720</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.19&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.19 720: 722.7510208759086 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.20: (E) -277.23</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">S</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">FPT_policy_value</span><span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>  <span class="c1"># is 0 for FPT at t=0,1</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">benefit</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
                    <span class="n">initial_premium</span><span class="o">=</span><span class="mf">.3</span><span class="p">,</span>
                    <span class="n">initial_policy</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
                    <span class="n">renewal_premium</span><span class="o">=</span><span class="mf">.04</span><span class="p">,</span>
                    <span class="n">renewal_policy</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">life</span><span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="mi">35</span><span class="p">),</span> <span class="o">**</span><span class="n">contract</span><span class="o">.</span><span class="n">premium_terms</span><span class="p">)</span>
<span class="n">R</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_policy_value</span><span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="o">.</span><span class="n">set_contract</span><span class="p">(</span><span class="n">premium</span><span class="o">=</span><span class="n">G</span><span class="p">))</span>
<span class="n">isclose</span><span class="p">(</span><span class="o">-</span><span class="mf">277.23</span><span class="p">,</span> <span class="n">R</span> <span class="o">-</span> <span class="n">S</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.20&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.20 -277.23: -277.19303323929216 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.21:  (D) 11866</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">u</span> <span class="o">=</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">IA</span><span class="o">=</span><span class="mf">0.14743</span><span class="p">,</span>
                       <span class="n">a</span><span class="o">=</span><span class="n">life</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">u</span><span class="p">),</span>
                       <span class="n">A</span><span class="o">=</span><span class="n">life</span><span class="o">.</span><span class="n">deferred_annuity</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="n">u</span><span class="p">),</span>
                       <span class="n">benefit</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">initial_policy</span><span class="o">=</span><span class="n">life</span><span class="o">.</span><span class="n">term_insurance</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">t</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">10</span><span class="o">*</span><span class="n">P</span><span class="p">),</span>
                    <span class="n">premium</span><span class="o">=</span><span class="n">P</span><span class="p">,</span>
                    <span class="n">benefit</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">temporary_annuity</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">t</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">u</span><span class="o">-</span><span class="n">t</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">deferred_annuity</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">t</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="n">u</span><span class="o">-</span><span class="n">t</span><span class="p">)</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_future_loss</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">11866</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.21&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.21 11866: 11866.30158100453 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.22:  (C) 46.24</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">PolicyValues</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.06</span><span class="p">)</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">benefit</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">premium</span><span class="o">=</span><span class="mf">1.250</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">A2</span><span class="p">):</span> 
    <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_variance_loss</span><span class="p">(</span><span class="n">A1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">A2</span><span class="o">=</span><span class="n">A2</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">)</span>
<span class="n">A2</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mf">20.55</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="mf">20.55</span><span class="o">/</span><span class="mi">8</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">benefit</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">premium</span><span class="o">=</span><span class="mf">1.875</span><span class="p">)</span>
<span class="n">var</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_variance_loss</span><span class="p">(</span><span class="n">A1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">A2</span><span class="o">=</span><span class="n">A2</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">46.2</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.22&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.22 46.2: 46.2375 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.23:  (D) 233</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.04</span><span class="p">)</span><span class="o">.</span><span class="n">set_p</span><span class="p">(</span><span class="mf">0.995</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">term_insurance</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">beta</span><span class="p">):</span>  <span class="c1"># value of premiums in first 20 years must be equal</span>
    <span class="k">return</span> <span class="n">beta</span> <span class="o">*</span> <span class="mf">11.087</span> <span class="o">+</span> <span class="p">(</span><span class="n">A</span> <span class="o">-</span> <span class="n">beta</span><span class="p">)</span> 
<span class="n">beta</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">216</span> <span class="o">*</span> <span class="mf">11.087</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">[</span><span class="mi">140</span><span class="p">,</span> <span class="mi">260</span><span class="p">])</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">233</span><span class="p">,</span> <span class="n">beta</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.23&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> *Term Insurance A_25(t=1,b=10000) &lt;--
   A_25(t=1) = A_25(t=1,endow=10000) - E_25(t=1,endow=10000)     ~endowment insurance - pure
    E_25(t=1) = p_25 * v(t=1)                                  ~pure endowment
----- Q7.23 233: 232.64747466274176 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.24:  (C) 680</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">premium_equivalence</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">life</span><span class="o">.</span><span class="n">whole_life_insurance</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">b</span><span class="o">=</span><span class="mi">1000000</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">680</span><span class="p">,</span> <span class="mi">11800</span> <span class="o">-</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.24&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.24 680: 680.291823645397 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.25:  (B) 3947.37</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SelectLife</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">.04</span><span class="p">)</span>\
                   <span class="o">.</span><span class="n">set_table</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="p">{</span><span class="mi">55</span><span class="p">:</span> <span class="p">[</span><span class="mf">.23</span><span class="p">,</span> <span class="mf">.24</span><span class="p">,</span> <span class="mf">.25</span><span class="p">],</span>
                                 <span class="mi">56</span><span class="p">:</span> <span class="p">[</span><span class="mf">.25</span><span class="p">,</span> <span class="mf">.26</span><span class="p">,</span> <span class="mf">.27</span><span class="p">],</span>
                                 <span class="mi">57</span><span class="p">:</span> <span class="p">[</span><span class="mf">.27</span><span class="p">,</span> <span class="mf">.28</span><span class="p">,</span> <span class="mf">.29</span><span class="p">],</span>
                                 <span class="mi">58</span><span class="p">:</span> <span class="p">[</span><span class="mf">.20</span><span class="p">,</span> <span class="mf">.30</span><span class="p">,</span> <span class="mf">.31</span><span class="p">]})</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">FPT_policy_value</span><span class="p">(</span><span class="mi">55</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">3950</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.25&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.25 3950: 3947.3684210526353 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.26:  (D) 28540</p>
<ul class="simple">
<li><p>backward = forward reserve recursion</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">.05</span><span class="p">)</span>\
                               <span class="o">.</span><span class="n">set_p</span><span class="p">(</span><span class="mf">0.85</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>\
                               <span class="o">.</span><span class="n">set_p</span><span class="p">(</span><span class="mf">0.85</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>\
                               <span class="o">.</span><span class="n">set_reserves</span><span class="p">(</span><span class="n">T</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">endowment</span><span class="o">=</span><span class="mi">50000</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">benefit</span><span class="p">(</span><span class="n">k</span><span class="p">):</span> <span class="k">return</span> <span class="n">k</span> <span class="o">*</span> <span class="mi">25000</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">P</span><span class="p">):</span>  <span class="c1"># solve P s.t. V is equal backwards and forwards</span>
    <span class="n">policy</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">premium</span><span class="o">=</span><span class="n">P</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="n">benefit</span><span class="p">,</span> <span class="n">reserve_benefit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">t_V_backward</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">**</span><span class="n">policy</span><span class="p">)</span> <span class="o">-</span> <span class="n">life</span><span class="o">.</span><span class="n">t_V_forward</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">**</span><span class="n">policy</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">[</span><span class="mi">27650</span><span class="p">,</span> <span class="mi">28730</span><span class="p">])</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">28540</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.26&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.26 28540: 28542.392566782808 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.27:  (B) 213</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.03</span><span class="p">)</span>\
                               <span class="o">.</span><span class="n">set_q</span><span class="p">(</span><span class="mf">0.008</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>\
                               <span class="o">.</span><span class="n">set_reserves</span><span class="p">(</span><span class="n">V</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mi">0</span><span class="p">})</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">G</span><span class="p">):</span>  <span class="c1"># Solve gross premium from expense reserves equation</span>
    <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">t_V</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">premium</span><span class="o">=</span><span class="n">G</span> <span class="o">-</span> <span class="mi">187</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="n">per_policy</span><span class="o">=</span><span class="mi">10</span> <span class="o">+</span> <span class="mf">0.25</span><span class="o">*</span><span class="n">G</span><span class="p">)</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=-</span><span class="mf">38.70</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">252</span><span class="p">])</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">213</span><span class="p">,</span> <span class="n">G</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.27&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.27 213: 212.970355987055 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.28:  (D) 24.3</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span>
<span class="n">PW</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">net_premium</span><span class="p">(</span><span class="mi">65</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>   <span class="c1"># 20_V=0 =&gt; P+W is net premium for A_65</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">net_premium</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>  <span class="c1"># =&gt; P is net premium for A_45:20</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">24.3</span><span class="p">,</span> <span class="n">PW</span> <span class="o">-</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.28&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.28 24.3: 24.334725400123975 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.29:  (E) 2270</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">Recursion</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.04</span><span class="p">)</span>\
                               <span class="o">.</span><span class="n">set_a</span><span class="p">(</span><span class="mf">14.8</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>\
                               <span class="o">.</span><span class="n">set_a</span><span class="p">(</span><span class="mf">11.4</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="o">+</span><span class="mi">10</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">B</span><span class="p">):</span> 
    <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">net_policy_value</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">B</span><span class="p">)</span>
<span class="n">B</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">2290</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="mi">2290</span><span class="o">*</span><span class="mi">10</span><span class="p">)</span>  <span class="c1"># Solve benefit B given net 10_V</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">initial_policy</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">renewal_policy</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="n">B</span><span class="p">)</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_premium</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">life</span><span class="o">.</span><span class="n">whole_life_annuity</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="o">**</span><span class="n">contract</span><span class="o">.</span><span class="n">premium_terms</span><span class="p">)</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_policy_value</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="o">.</span><span class="n">set_contract</span><span class="p">(</span><span class="n">premium</span><span class="o">=</span><span class="n">G</span><span class="p">))</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">2270</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.29&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.29 2270: 2270.743243243244 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.30:  (E) 9035</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">premium</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>  <span class="c1"># premiums=0 after t=10</span>
<span class="n">L</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span><span class="o">.</span><span class="n">gross_policy_value</span><span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">)</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">SULT</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">gross_policy_value</span><span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">)</span> <span class="c1"># 10000</span>
<span class="n">isclose</span><span class="p">(</span><span class="mi">9035</span><span class="p">,</span> <span class="n">V</span> <span class="o">-</span> <span class="n">L</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.30&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.30 9035: 9034.654127845053 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.31:  (E) 0.310</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">life</span> <span class="o">=</span> <span class="n">Reserves</span><span class="p">()</span><span class="o">.</span><span class="n">set_reserves</span><span class="p">(</span><span class="n">T</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">G</span> <span class="o">=</span> <span class="mf">368.05</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">P</span><span class="p">):</span>  <span class="c1"># solve net premium expense reserve equation</span>
    <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">t_V</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">premium</span><span class="o">=</span><span class="n">G</span><span class="o">-</span><span class="n">P</span><span class="p">,</span> <span class="n">benefit</span><span class="o">=</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="n">per_policy</span><span class="o">=</span><span class="mi">5</span><span class="o">+</span><span class="mf">0.08</span><span class="o">*</span><span class="n">G</span><span class="p">)</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=-</span><span class="mf">23.64</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">[</span><span class="mf">.29</span><span class="p">,</span> <span class="mf">.31</span><span class="p">])</span> <span class="o">/</span> <span class="mi">1000</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">0.310</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.31&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.31 0.31: 0.309966 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>SOA Question 7.32:  (B) 1.4</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">life</span> <span class="o">=</span> <span class="n">PolicyValues</span><span class="p">()</span><span class="o">.</span><span class="n">set_interest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mf">0.06</span><span class="p">)</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">benefit</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">premium</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">A2</span><span class="p">):</span> 
    <span class="k">return</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_variance_loss</span><span class="p">(</span><span class="n">A1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">A2</span><span class="o">=</span><span class="n">A2</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">)</span>
<span class="n">A2</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mf">0.455</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="mf">0.455</span><span class="p">)</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">benefit</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">premium</span><span class="o">=</span><span class="mf">0.16</span><span class="p">)</span>
<span class="n">var</span> <span class="o">=</span> <span class="n">life</span><span class="o">.</span><span class="n">gross_variance_loss</span><span class="p">(</span><span class="n">A1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">A2</span><span class="o">=</span><span class="n">A2</span><span class="p">,</span> <span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">)</span>
<span class="n">isclose</span><span class="p">(</span><span class="mf">1.39</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">question</span><span class="o">=</span><span class="s2">&quot;Q7.32&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>----- Q7.32 1.39: 1.3848168384380901 [OK] -----
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p><strong>Final Score</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="nb">print</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">isclose</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2023-06-05 23:00:49.662341
Passed: 136/136
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="woolhouse.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Woolhouse M’thly</p>
      </div>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tables">1 Tables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#survival-models">2 Survival models</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#life-tables-and-selection">3 Life tables and selection</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#insurance-benefits">4 Insurance benefits</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#annuities">5 Annuities</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#premium-calculation">6 Premium Calculation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#policy-values">7 Policy Values</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Terence Lim
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>